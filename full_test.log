
> fastrack-driving-school-lms@1.0.0 test
> react-scripts test --watchAll=false --testTimeout=30000

PASS src/services/__tests__/loggingService.test.js
PASS src/hooks/useSessionTimer.test.js
PASS src/hooks/usePVQTrigger.test.js
PASS src/api/utils/__tests__/validationHelper.test.js
PASS src/api/errors/__tests__/ApiError.test.js
PASS src/api/base/__tests__/ServiceBase.test.js
PASS src/hooks/useBreakManagement.test.js
PASS src/api/utils/__tests__/timestampHelper.test.js
PASS src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js
PASS src/api/validators/__tests__/validators.test.js
PASS src/hooks/useSessionData.test.js
PASS src/api/validators/__tests__/sanitizer.test.js
PASS src/api/utils/__tests__/errorHandler.test.js
PASS src/constants/__tests__/userRoles.assignment.test.js
PASS src/utils/__tests__/dateTimeFormatter.test.js
PASS src/api/utils/__tests__/firestoreHelper.test.js
PASS src/api/base/__tests__/CacheService.test.js
PASS src/api/base/__tests__/QueryHelper.test.js
PASS src/api/enrollment/__tests__/enrollmentServices.reset.test.js
FAIL src/api/student/__tests__/userServices.getAllStudents.test.js
  ‚óè User Services - getAllStudents ‚Ä∫ should fetch all students with role STUDENT

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 40 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m getAllStudents()[33m;[39m
     [90m 41 |[39m
    [31m[1m>[22m[39m[90m 42 |[39m     expect([33mArray[39m[33m.[39misArray(result))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 43 |[39m     expect(result[33m.[39mlength)[33m.[39mtoBe([35m2[39m)[33m;[39m
     [90m 44 |[39m     expect(result[[35m0[39m][33m.[39mrole)[33m.[39mtoBe([33mUSER_ROLES[39m[33m.[39m[33mSTUDENT[39m)[33m;[39m
     [90m 45 |[39m     expect(result[[35m1[39m][33m.[39mrole)[33m.[39mtoBe([33mUSER_ROLES[39m[33m.[39m[33mSTUDENT[39m)[33m;[39m[0m

      at Object.<anonymous> (src/api/student/__tests__/userServices.getAllStudents.test.js:42:35)

  ‚óè User Services - getAllStudents ‚Ä∫ should sort students by displayName

    TypeError: Cannot read properties of undefined (reading '0')

    [0m [90m 73 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m getAllStudents()[33m;[39m
     [90m 74 |[39m
    [31m[1m>[22m[39m[90m 75 |[39m     expect(result[[35m0[39m][33m.[39mdisplayName)[33m.[39mtoBe([32m'Alice'[39m)[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m 76 |[39m     expect(result[[35m1[39m][33m.[39mdisplayName)[33m.[39mtoBe([32m'Zoe'[39m)[33m;[39m
     [90m 77 |[39m   })[33m;[39m
     [90m 78 |[39m[0m

      at Object.<anonymous> (src/api/student/__tests__/userServices.getAllStudents.test.js:75:18)

  ‚óè User Services - getAllStudents ‚Ä∫ should sort by email when displayName is not available

    TypeError: Cannot read properties of undefined (reading '0')

    [0m [90m 104 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m getAllStudents()[33m;[39m
     [90m 105 |[39m
    [31m[1m>[22m[39m[90m 106 |[39m     expect(result[[35m0[39m][33m.[39memail)[33m.[39mtoBe([32m'apple@example.com'[39m)[33m;[39m
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 107 |[39m     expect(result[[35m1[39m][33m.[39memail)[33m.[39mtoBe([32m'zebra@example.com'[39m)[33m;[39m
     [90m 108 |[39m   })[33m;[39m
     [90m 109 |[39m[0m

      at Object.<anonymous> (src/api/student/__tests__/userServices.getAllStudents.test.js:106:18)

  ‚óè User Services - getAllStudents ‚Ä∫ should return empty array when no students exist

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 119 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m getAllStudents()[33m;[39m
     [90m 120 |[39m
    [31m[1m>[22m[39m[90m 121 |[39m     expect([33mArray[39m[33m.[39misArray(result))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 122 |[39m     expect(result[33m.[39mlength)[33m.[39mtoBe([35m0[39m)[33m;[39m
     [90m 123 |[39m   })[33m;[39m
     [90m 124 |[39m[0m

      at Object.<anonymous> (src/api/student/__tests__/userServices.getAllStudents.test.js:121:35)

  ‚óè User Services - getAllStudents ‚Ä∫ should include all student data fields

    TypeError: Cannot read properties of undefined (reading '0')

    [0m [90m 145 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m getAllStudents()[33m;[39m
     [90m 146 |[39m
    [31m[1m>[22m[39m[90m 147 |[39m     expect(result[[35m0[39m])[33m.[39mtoEqual({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 148 |[39m       id[33m:[39m [32m'student-1'[39m[33m,[39m
     [90m 149 |[39m       [33m...[39mmockStudent
     [90m 150 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/api/student/__tests__/userServices.getAllStudents.test.js:147:18)

  ‚óè User Services - getAllStudents ‚Ä∫ should use query filter for STUDENT role

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 164 |[39m     [36mawait[39m getAllStudents()[33m;[39m
     [90m 165 |[39m
    [31m[1m>[22m[39m[90m 166 |[39m     expect(firestoreModule[33m.[39mquery)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 167 |[39m   })[33m;[39m
     [90m 168 |[39m })[33m;[39m
     [90m 169 |[39m[0m

      at Object.<anonymous> (src/api/student/__tests__/userServices.getAllStudents.test.js:166:35)

PASS src/api/enrollment/__tests__/enrollmentServices.checkCourseAccess.test.js
PASS src/api/enrollment/__tests__/enrollmentServices.refactor.test.js
PASS src/context/TimerContext.test.js
PASS src/api/compliance/__tests__/schedulingServices.assignment.test.js
PASS src/components/common/ErrorBoundary/ErrorBoundary.test.js
PASS src/components/admin/__tests__/SchedulingManagement.assignment.test.js
FAIL src/api/base/__tests__/RetryHandler.test.js
  ‚óè Console

    console.warn
      ‚è±Ô∏è  [test-operation] Attempt 1/3 failed, retrying in 10ms: Network timeout

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:157:22)

    console.warn
      ‚è±Ô∏è  [test-operation] Attempt 2/3 failed, retrying in 18ms: Network timeout

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:157:22)

    console.log
      ‚úÖ [test-operation] Succeeded on attempt 3/3

      at RetryHandler.execute (src/api/base/RetryHandler.js:74:19)

    console.error
      ‚ùå [test-operation] Non-retryable error on attempt 1: Invalid credentials

    [0m [90m 84 |[39m         [90m// Check if error is retryable[39m
     [90m 85 |[39m         [36mif[39m ([36mthis[39m[33m.[39misNonRetryableError(error)) {
    [31m[1m>[22m[39m[90m 86 |[39m           console[33m.[39merror(
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 87 |[39m             [32m`‚ùå [${operationName}] Non-retryable error on attempt ${attempt}: ${error.message}`[39m
     [90m 88 |[39m           )[33m;[39m
     [90m 89 |[39m           [90m// If already an ApiError, re-throw as-is[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:86:19)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:173:9)

    console.warn
      ‚è±Ô∏è  [test-operation] Attempt 1/3 failed, retrying in 9ms: Persistent network error

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:190:9)

    console.warn
      ‚è±Ô∏è  [test-operation] Attempt 2/3 failed, retrying in 18ms: Persistent network error

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:190:9)

    console.error
      ‚ùå [test-operation] Failed after 3 attempts. Last error: Persistent network error

    [0m [90m 101 |[39m         [90m// If last attempt, break loop and throw[39m
     [90m 102 |[39m         [36mif[39m (attempt [33m===[39m [36mthis[39m[33m.[39mmaxAttempts) {
    [31m[1m>[22m[39m[90m 103 |[39m           console[33m.[39merror(
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 104 |[39m             [32m`‚ùå [${operationName}] Failed after ${this.maxAttempts} attempts. Last error: ${error.message}`[39m
     [90m 105 |[39m           )[33m;[39m
     [90m 106 |[39m           [36mbreak[39m[33m;[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:103:19)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:190:9)

    console.warn
      ‚è±Ô∏è  [updateUser] Attempt 1/3 failed, retrying in 10ms: Connection failed

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:205:9)

    console.warn
      ‚è±Ô∏è  [updateUser] Attempt 2/3 failed, retrying in 21ms: Connection failed

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:205:9)

    console.error
      ‚ùå [updateUser] Failed after 3 attempts. Last error: Connection failed

    [0m [90m 101 |[39m         [90m// If last attempt, break loop and throw[39m
     [90m 102 |[39m         [36mif[39m (attempt [33m===[39m [36mthis[39m[33m.[39mmaxAttempts) {
    [31m[1m>[22m[39m[90m 103 |[39m           console[33m.[39merror(
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 104 |[39m             [32m`‚ùå [${operationName}] Failed after ${this.maxAttempts} attempts. Last error: ${error.message}`[39m
     [90m 105 |[39m           )[33m;[39m
     [90m 106 |[39m           [36mbreak[39m[33m;[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:103:19)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:205:9)

    console.warn
      ‚è±Ô∏è  [async-operation] Attempt 1/3 failed, retrying in 9ms: Network error

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:228:22)

    console.log
      ‚úÖ [async-operation] Succeeded on attempt 2/3

      at RetryHandler.execute (src/api/base/RetryHandler.js:74:19)

    console.warn
      ‚è±Ô∏è  [timed-operation] Attempt 1/3 failed, retrying in 10ms: Network error

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:247:7)

    console.warn
      ‚è±Ô∏è  [timed-operation] Attempt 2/3 failed, retrying in 20ms: Network error

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:247:7)

    console.log
      ‚úÖ [timed-operation] Succeeded on attempt 3/3

      at RetryHandler.execute (src/api/base/RetryHandler.js:74:19)

    console.warn
      ‚è±Ô∏è  [test-operation] Attempt 1/3 failed, retrying in 10ms: Specific failure reason

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:272:9)

    console.warn
      ‚è±Ô∏è  [test-operation] Attempt 2/3 failed, retrying in 19ms: Specific failure reason

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:272:9)

    console.error
      ‚ùå [test-operation] Failed after 3 attempts. Last error: Specific failure reason

    [0m [90m 101 |[39m         [90m// If last attempt, break loop and throw[39m
     [90m 102 |[39m         [36mif[39m (attempt [33m===[39m [36mthis[39m[33m.[39mmaxAttempts) {
    [31m[1m>[22m[39m[90m 103 |[39m           console[33m.[39merror(
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 104 |[39m             [32m`‚ùå [${operationName}] Failed after ${this.maxAttempts} attempts. Last error: ${error.message}`[39m
     [90m 105 |[39m           )[33m;[39m
     [90m 106 |[39m           [36mbreak[39m[33m;[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:103:19)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:272:9)

    console.warn
      ‚è±Ô∏è  [myOperation] Attempt 1/3 failed, retrying in 10ms: Network unavailable

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:288:9)

    console.warn
      ‚è±Ô∏è  [myOperation] Attempt 2/3 failed, retrying in 18ms: Network unavailable

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:288:9)

    console.error
      ‚ùå [myOperation] Failed after 3 attempts. Last error: Network unavailable

    [0m [90m 101 |[39m         [90m// If last attempt, break loop and throw[39m
     [90m 102 |[39m         [36mif[39m (attempt [33m===[39m [36mthis[39m[33m.[39mmaxAttempts) {
    [31m[1m>[22m[39m[90m 103 |[39m           console[33m.[39merror(
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 104 |[39m             [32m`‚ùå [${operationName}] Failed after ${this.maxAttempts} attempts. Last error: ${error.message}`[39m
     [90m 105 |[39m           )[33m;[39m
     [90m 106 |[39m           [36mbreak[39m[33m;[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:103:19)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:288:9)

    console.warn
      ‚è±Ô∏è  [test-operation] Attempt 1/3 failed, retrying in 96ms: Network error

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:305:22)

    console.log
      ‚úÖ [test-operation] Succeeded on attempt 2/3

      at RetryHandler.execute (src/api/base/RetryHandler.js:74:19)

    console.warn
      ‚è±Ô∏è  [test-operation] Attempt 1/3 failed, retrying in 96ms: Persistent error

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:319:9)

    console.warn
      ‚è±Ô∏è  [test-operation] Attempt 2/3 failed, retrying in 197ms: Persistent error

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:319:9)

    console.error
      ‚ùå [test-operation] Failed after 3 attempts. Last error: Persistent error

    [0m [90m 101 |[39m         [90m// If last attempt, break loop and throw[39m
     [90m 102 |[39m         [36mif[39m (attempt [33m===[39m [36mthis[39m[33m.[39mmaxAttempts) {
    [31m[1m>[22m[39m[90m 103 |[39m           console[33m.[39merror(
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 104 |[39m             [32m`‚ùå [${operationName}] Failed after ${this.maxAttempts} attempts. Last error: ${error.message}`[39m
     [90m 105 |[39m           )[33m;[39m
     [90m 106 |[39m           [36mbreak[39m[33m;[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:103:19)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:319:9)

    console.warn
      ‚è±Ô∏è  [test] Attempt 1/2 failed, retrying in 5ms: Error

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:344:9)

    console.error
      ‚ùå [test] Failed after 2 attempts. Last error: Error

    [0m [90m 101 |[39m         [90m// If last attempt, break loop and throw[39m
     [90m 102 |[39m         [36mif[39m (attempt [33m===[39m [36mthis[39m[33m.[39mmaxAttempts) {
    [31m[1m>[22m[39m[90m 103 |[39m           console[33m.[39merror(
     [90m     |[39m                   [31m[1m^[22m[39m
     [90m 104 |[39m             [32m`‚ùå [${operationName}] Failed after ${this.maxAttempts} attempts. Last error: ${error.message}`[39m
     [90m 105 |[39m           )[33m;[39m
     [90m 106 |[39m           [36mbreak[39m[33m;[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:103:19)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:344:9)

    console.warn
      ‚è±Ô∏è  [fetchData] Attempt 1/3 failed, retrying in 9ms: Network error

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:360:22)

    console.warn
      ‚è±Ô∏è  [fetchData] Attempt 2/3 failed, retrying in 19ms: Network error

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:360:22)

    console.log
      ‚úÖ [fetchData] Succeeded on attempt 3/3

      at RetryHandler.execute (src/api/base/RetryHandler.js:74:19)

    console.error
      ‚ùå [updateDocument] Non-retryable error on attempt 1: Access denied

    [0m [90m 84 |[39m         [90m// Check if error is retryable[39m
     [90m 85 |[39m         [36mif[39m ([36mthis[39m[33m.[39misNonRetryableError(error)) {
    [31m[1m>[22m[39m[90m 86 |[39m           console[33m.[39merror(
     [90m    |[39m                   [31m[1m^[22m[39m
     [90m 87 |[39m             [32m`‚ùå [${operationName}] Non-retryable error on attempt ${attempt}: ${error.message}`[39m
     [90m 88 |[39m           )[33m;[39m
     [90m 89 |[39m           [90m// If already an ApiError, re-throw as-is[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:86:19)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:378:9)

    console.warn
      ‚è±Ô∏è  [submitForm] Attempt 1/3 failed, retrying in 11ms: Service unavailable

    [0m [90m 109 |[39m         [90m// Calculate delay and log retry[39m
     [90m 110 |[39m         [36mconst[39m delayMs [33m=[39m [36mthis[39m[33m.[39mgetDelayMs(attempt)[33m;[39m
    [31m[1m>[22m[39m[90m 111 |[39m         console[33m.[39mwarn(
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 112 |[39m           [32m`‚è±Ô∏è  [${operationName}] Attempt ${attempt}/${this.maxAttempts} failed, retrying in ${Math.round(delayMs)}ms: ${error.message}`[39m
     [90m 113 |[39m         )[33m;[39m
     [90m 114 |[39m[0m

      at RetryHandler.execute (src/api/base/RetryHandler.js:111:17)
      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:394:22)

    console.log
      ‚úÖ [submitForm] Succeeded on attempt 2/3

      at RetryHandler.execute (src/api/base/RetryHandler.js:74:19)

  ‚óè RetryHandler ‚Ä∫ execute ‚Ä∫ should fail immediately for non-retryable errors

    expect(received).toContain(expected) // indexOf

    Expected substring: "Invalid credentials"
    Received string:    "UNAUTHENTICATED"

    [0m [90m 180 |[39m       } [36mcatch[39m (error) {
     [90m 181 |[39m         expect(attempts)[33m.[39mtoBe([35m1[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 182 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'Invalid credentials'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 183 |[39m       }
     [90m 184 |[39m     })[33m;[39m
     [90m 185 |[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:182:31)

  ‚óè RetryHandler ‚Ä∫ execute ‚Ä∫ should throw after max attempts exhausted

    expect(received).toContain(expected) // indexOf

    Expected substring: "failed after 3 attempts"
    Received string:    "RETRY_EXHAUSTED"

    [0m [90m 196 |[39m         expect(attempts)[33m.[39mtoBe([35m3[39m)[33m;[39m
     [90m 197 |[39m         [90m// RetryHandler throws ApiError with RETRY_EXHAUSTED code[39m
    [31m[1m>[22m[39m[90m 198 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'failed after 3 attempts'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 199 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'Persistent network error'[39m)[33m;[39m
     [90m 200 |[39m       }
     [90m 201 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:198:31)

  ‚óè RetryHandler ‚Ä∫ execute ‚Ä∫ should throw ApiError with context information

    expect(received).toContain(expected) // indexOf

    Expected substring: "failed after 3 attempts"
    Received string:    "RETRY_EXHAUSTED"

    [0m [90m 209 |[39m       } [36mcatch[39m (error) {
     [90m 210 |[39m         [90m// Should throw ApiError after exhausting retries[39m
    [31m[1m>[22m[39m[90m 211 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'failed after 3 attempts'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 212 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'Connection failed'[39m)[33m;[39m
     [90m 213 |[39m       }
     [90m 214 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:211:31)

  ‚óè RetryHandler ‚Ä∫ execute ‚Ä∫ should validate operation parameter

    expect(received).toContain(expected) // indexOf

    Expected substring: "must be a function"
    Received string:    "INVALID_OPERATION"

    [0m [90m 219 |[39m         fail([32m'Should have thrown error'[39m)[33m;[39m
     [90m 220 |[39m       } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 221 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'must be a function'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 222 |[39m       }
     [90m 223 |[39m     })[33m;[39m
     [90m 224 |[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:221:31)

  ‚óè RetryHandler ‚Ä∫ execute ‚Ä∫ should handle errors with message property

    expect(received).toContain(expected) // indexOf

    Expected substring: "failed after 3 attempts"
    Received string:    "RETRY_EXHAUSTED"

    [0m [90m 276 |[39m       } [36mcatch[39m (caughtError) {
     [90m 277 |[39m         [90m// Should include original error message in context[39m
    [31m[1m>[22m[39m[90m 278 |[39m         expect(caughtError[33m.[39mmessage)[33m.[39mtoContain([32m'failed after 3 attempts'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 279 |[39m         expect(caughtError[33m.[39mmessage)[33m.[39mtoContain([32m'Specific failure reason'[39m)[33m;[39m
     [90m 280 |[39m       }
     [90m 281 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:278:37)

  ‚óè RetryHandler ‚Ä∫ execute ‚Ä∫ should log context in thrown error

    expect(received).toContain(expected) // indexOf

    Expected substring: "myOperation"
    Received string:    "RETRY_EXHAUSTED"

    [0m [90m 292 |[39m       } [36mcatch[39m (caughtError) {
     [90m 293 |[39m         [90m// Should include operation name and attempt count[39m
    [31m[1m>[22m[39m[90m 294 |[39m         expect(caughtError[33m.[39mmessage)[33m.[39mtoContain([32m'myOperation'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 295 |[39m         expect(caughtError[33m.[39mmessage)[33m.[39mtoContain([32m'failed after 3 attempts'[39m)[33m;[39m
     [90m 296 |[39m         expect(caughtError[33m.[39mmessage)[33m.[39mtoContain([32m'Network unavailable'[39m)[33m;[39m
     [90m 297 |[39m       }[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:294:37)

  ‚óè RetryHandler ‚Ä∫ retryAsync convenience function ‚Ä∫ should throw after max attempts

    expect(received).toContain(expected) // indexOf

    Expected substring: "failed after"
    Received string:    "RETRY_EXHAUSTED"

    [0m [90m 322 |[39m         fail([32m'Should have thrown error'[39m)[33m;[39m
     [90m 323 |[39m       } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 324 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'failed after'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 325 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'Persistent error'[39m)[33m;[39m
     [90m 326 |[39m       }
     [90m 327 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:324:31)

  ‚óè RetryHandler ‚Ä∫ createRetryHandler factory ‚Ä∫ should work with custom handler

    expect(received).toContain(expected) // indexOf

    Expected substring: "failed after 2 attempts"
    Received string:    "RETRY_EXHAUSTED"

    [0m [90m 349 |[39m       } [36mcatch[39m (error) {
     [90m 350 |[39m         expect(attempts)[33m.[39mtoBe([35m2[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 351 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'failed after 2 attempts'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 352 |[39m       }
     [90m 353 |[39m     })[33m;[39m
     [90m 354 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:351:31)

  ‚óè RetryHandler ‚Ä∫ real-world scenarios ‚Ä∫ should fail fast on permission error

    expect(received).toContain(expected) // indexOf

    Expected substring: "Access denied"
    Received string:    "PERMISSION_DENIED"

    [0m [90m 385 |[39m       } [36mcatch[39m (error) {
     [90m 386 |[39m         expect(attempts)[33m.[39mtoBe([35m1[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 387 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'Access denied'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 388 |[39m       }
     [90m 389 |[39m     })[33m;[39m
     [90m 390 |[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:387:31)

PASS src/components/admin/__tests__/SchedulingManagement.loadingIndicators.test.js
  ‚óè Console

    console.error
      Error deleting time slot: Error: Delete failed
          at Object.<anonymous> (C:\Users\Cole\Documents\Fastrack\Fastrack-Learning_Management-System\src\components\admin\__tests__\SchedulingManagement.loadingIndicators.test.js:171:58)

    [0m [90m 138 |[39m       setTimeout(() [33m=>[39m setSuccess([32m''[39m)[33m,[39m [35m3000[39m)[33m;[39m
     [90m 139 |[39m     } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 140 |[39m       console[33m.[39merror([32m'Error deleting time slot:'[39m[33m,[39m err)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 141 |[39m       setError([32m'Failed to delete time slot'[39m)[33m;[39m
     [90m 142 |[39m     } [36mfinally[39m {
     [90m 143 |[39m       setDeletingSlot(prev [33m=>[39m ({ [33m...[39mprev[33m,[39m [slotId][33m:[39m [36mfalse[39m }))[33m;[39m[0m

      at handleDeleteSlot (src/components/admin/SchedulingManagement.jsx:140:15)

    console.error
      Error unassigning slot: Error: Unassign failed
          at Object.<anonymous> (C:\Users\Cole\Documents\Fastrack\Fastrack-Learning_Management-System\src\components\admin\__tests__\SchedulingManagement.loadingIndicators.test.js:261:60)

    [0m [90m 192 |[39m       setTimeout(() [33m=>[39m setSuccess([32m''[39m)[33m,[39m [35m3000[39m)[33m;[39m
     [90m 193 |[39m     } [36mcatch[39m (err) {
    [31m[1m>[22m[39m[90m 194 |[39m       console[33m.[39merror([32m'Error unassigning slot:'[39m[33m,[39m err)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 195 |[39m       setError(err[33m.[39mmessage [33m||[39m [32m'Failed to unassign lesson'[39m)[33m;[39m
     [90m 196 |[39m     } [36mfinally[39m {
     [90m 197 |[39m       setUnassigningSlot(prev [33m=>[39m ({ [33m...[39mprev[33m,[39m [slot[33m.[39mid][33m:[39m [36mfalse[39m }))[33m;[39m[0m

      at handleUnassignSlot (src/components/admin/SchedulingManagement.jsx:194:15)


Summary of all failing tests
FAIL src/api/student/__tests__/userServices.getAllStudents.test.js
  ‚óè User Services - getAllStudents ‚Ä∫ should fetch all students with role STUDENT

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 40 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m getAllStudents()[33m;[39m
     [90m 41 |[39m
    [31m[1m>[22m[39m[90m 42 |[39m     expect([33mArray[39m[33m.[39misArray(result))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m    |[39m                                   [31m[1m^[22m[39m
     [90m 43 |[39m     expect(result[33m.[39mlength)[33m.[39mtoBe([35m2[39m)[33m;[39m
     [90m 44 |[39m     expect(result[[35m0[39m][33m.[39mrole)[33m.[39mtoBe([33mUSER_ROLES[39m[33m.[39m[33mSTUDENT[39m)[33m;[39m
     [90m 45 |[39m     expect(result[[35m1[39m][33m.[39mrole)[33m.[39mtoBe([33mUSER_ROLES[39m[33m.[39m[33mSTUDENT[39m)[33m;[39m[0m

      at Object.<anonymous> (src/api/student/__tests__/userServices.getAllStudents.test.js:42:35)

  ‚óè User Services - getAllStudents ‚Ä∫ should sort students by displayName

    TypeError: Cannot read properties of undefined (reading '0')

    [0m [90m 73 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m getAllStudents()[33m;[39m
     [90m 74 |[39m
    [31m[1m>[22m[39m[90m 75 |[39m     expect(result[[35m0[39m][33m.[39mdisplayName)[33m.[39mtoBe([32m'Alice'[39m)[33m;[39m
     [90m    |[39m                  [31m[1m^[22m[39m
     [90m 76 |[39m     expect(result[[35m1[39m][33m.[39mdisplayName)[33m.[39mtoBe([32m'Zoe'[39m)[33m;[39m
     [90m 77 |[39m   })[33m;[39m
     [90m 78 |[39m[0m

      at Object.<anonymous> (src/api/student/__tests__/userServices.getAllStudents.test.js:75:18)

  ‚óè User Services - getAllStudents ‚Ä∫ should sort by email when displayName is not available

    TypeError: Cannot read properties of undefined (reading '0')

    [0m [90m 104 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m getAllStudents()[33m;[39m
     [90m 105 |[39m
    [31m[1m>[22m[39m[90m 106 |[39m     expect(result[[35m0[39m][33m.[39memail)[33m.[39mtoBe([32m'apple@example.com'[39m)[33m;[39m
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 107 |[39m     expect(result[[35m1[39m][33m.[39memail)[33m.[39mtoBe([32m'zebra@example.com'[39m)[33m;[39m
     [90m 108 |[39m   })[33m;[39m
     [90m 109 |[39m[0m

      at Object.<anonymous> (src/api/student/__tests__/userServices.getAllStudents.test.js:106:18)

  ‚óè User Services - getAllStudents ‚Ä∫ should return empty array when no students exist

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 119 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m getAllStudents()[33m;[39m
     [90m 120 |[39m
    [31m[1m>[22m[39m[90m 121 |[39m     expect([33mArray[39m[33m.[39misArray(result))[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 122 |[39m     expect(result[33m.[39mlength)[33m.[39mtoBe([35m0[39m)[33m;[39m
     [90m 123 |[39m   })[33m;[39m
     [90m 124 |[39m[0m

      at Object.<anonymous> (src/api/student/__tests__/userServices.getAllStudents.test.js:121:35)

  ‚óè User Services - getAllStudents ‚Ä∫ should include all student data fields

    TypeError: Cannot read properties of undefined (reading '0')

    [0m [90m 145 |[39m     [36mconst[39m result [33m=[39m [36mawait[39m getAllStudents()[33m;[39m
     [90m 146 |[39m
    [31m[1m>[22m[39m[90m 147 |[39m     expect(result[[35m0[39m])[33m.[39mtoEqual({
     [90m     |[39m                  [31m[1m^[22m[39m
     [90m 148 |[39m       id[33m:[39m [32m'student-1'[39m[33m,[39m
     [90m 149 |[39m       [33m...[39mmockStudent
     [90m 150 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/api/student/__tests__/userServices.getAllStudents.test.js:147:18)

  ‚óè User Services - getAllStudents ‚Ä∫ should use query filter for STUDENT role

    expect(jest.fn()).toHaveBeenCalled()

    Expected number of calls: >= 1
    Received number of calls:    0

    [0m [90m 164 |[39m     [36mawait[39m getAllStudents()[33m;[39m
     [90m 165 |[39m
    [31m[1m>[22m[39m[90m 166 |[39m     expect(firestoreModule[33m.[39mquery)[33m.[39mtoHaveBeenCalled()[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 167 |[39m   })[33m;[39m
     [90m 168 |[39m })[33m;[39m
     [90m 169 |[39m[0m

      at Object.<anonymous> (src/api/student/__tests__/userServices.getAllStudents.test.js:166:35)

FAIL src/api/base/__tests__/RetryHandler.test.js
  ‚óè RetryHandler ‚Ä∫ execute ‚Ä∫ should fail immediately for non-retryable errors

    expect(received).toContain(expected) // indexOf

    Expected substring: "Invalid credentials"
    Received string:    "UNAUTHENTICATED"

    [0m [90m 180 |[39m       } [36mcatch[39m (error) {
     [90m 181 |[39m         expect(attempts)[33m.[39mtoBe([35m1[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 182 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'Invalid credentials'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 183 |[39m       }
     [90m 184 |[39m     })[33m;[39m
     [90m 185 |[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:182:31)

  ‚óè RetryHandler ‚Ä∫ execute ‚Ä∫ should throw after max attempts exhausted

    expect(received).toContain(expected) // indexOf

    Expected substring: "failed after 3 attempts"
    Received string:    "RETRY_EXHAUSTED"

    [0m [90m 196 |[39m         expect(attempts)[33m.[39mtoBe([35m3[39m)[33m;[39m
     [90m 197 |[39m         [90m// RetryHandler throws ApiError with RETRY_EXHAUSTED code[39m
    [31m[1m>[22m[39m[90m 198 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'failed after 3 attempts'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 199 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'Persistent network error'[39m)[33m;[39m
     [90m 200 |[39m       }
     [90m 201 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:198:31)

  ‚óè RetryHandler ‚Ä∫ execute ‚Ä∫ should throw ApiError with context information

    expect(received).toContain(expected) // indexOf

    Expected substring: "failed after 3 attempts"
    Received string:    "RETRY_EXHAUSTED"

    [0m [90m 209 |[39m       } [36mcatch[39m (error) {
     [90m 210 |[39m         [90m// Should throw ApiError after exhausting retries[39m
    [31m[1m>[22m[39m[90m 211 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'failed after 3 attempts'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 212 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'Connection failed'[39m)[33m;[39m
     [90m 213 |[39m       }
     [90m 214 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:211:31)

  ‚óè RetryHandler ‚Ä∫ execute ‚Ä∫ should validate operation parameter

    expect(received).toContain(expected) // indexOf

    Expected substring: "must be a function"
    Received string:    "INVALID_OPERATION"

    [0m [90m 219 |[39m         fail([32m'Should have thrown error'[39m)[33m;[39m
     [90m 220 |[39m       } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 221 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'must be a function'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 222 |[39m       }
     [90m 223 |[39m     })[33m;[39m
     [90m 224 |[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:221:31)

  ‚óè RetryHandler ‚Ä∫ execute ‚Ä∫ should handle errors with message property

    expect(received).toContain(expected) // indexOf

    Expected substring: "failed after 3 attempts"
    Received string:    "RETRY_EXHAUSTED"

    [0m [90m 276 |[39m       } [36mcatch[39m (caughtError) {
     [90m 277 |[39m         [90m// Should include original error message in context[39m
    [31m[1m>[22m[39m[90m 278 |[39m         expect(caughtError[33m.[39mmessage)[33m.[39mtoContain([32m'failed after 3 attempts'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 279 |[39m         expect(caughtError[33m.[39mmessage)[33m.[39mtoContain([32m'Specific failure reason'[39m)[33m;[39m
     [90m 280 |[39m       }
     [90m 281 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:278:37)

  ‚óè RetryHandler ‚Ä∫ execute ‚Ä∫ should log context in thrown error

    expect(received).toContain(expected) // indexOf

    Expected substring: "myOperation"
    Received string:    "RETRY_EXHAUSTED"

    [0m [90m 292 |[39m       } [36mcatch[39m (caughtError) {
     [90m 293 |[39m         [90m// Should include operation name and attempt count[39m
    [31m[1m>[22m[39m[90m 294 |[39m         expect(caughtError[33m.[39mmessage)[33m.[39mtoContain([32m'myOperation'[39m)[33m;[39m
     [90m     |[39m                                     [31m[1m^[22m[39m
     [90m 295 |[39m         expect(caughtError[33m.[39mmessage)[33m.[39mtoContain([32m'failed after 3 attempts'[39m)[33m;[39m
     [90m 296 |[39m         expect(caughtError[33m.[39mmessage)[33m.[39mtoContain([32m'Network unavailable'[39m)[33m;[39m
     [90m 297 |[39m       }[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:294:37)

  ‚óè RetryHandler ‚Ä∫ retryAsync convenience function ‚Ä∫ should throw after max attempts

    expect(received).toContain(expected) // indexOf

    Expected substring: "failed after"
    Received string:    "RETRY_EXHAUSTED"

    [0m [90m 322 |[39m         fail([32m'Should have thrown error'[39m)[33m;[39m
     [90m 323 |[39m       } [36mcatch[39m (error) {
    [31m[1m>[22m[39m[90m 324 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'failed after'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 325 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'Persistent error'[39m)[33m;[39m
     [90m 326 |[39m       }
     [90m 327 |[39m     })[33m;[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:324:31)

  ‚óè RetryHandler ‚Ä∫ createRetryHandler factory ‚Ä∫ should work with custom handler

    expect(received).toContain(expected) // indexOf

    Expected substring: "failed after 2 attempts"
    Received string:    "RETRY_EXHAUSTED"

    [0m [90m 349 |[39m       } [36mcatch[39m (error) {
     [90m 350 |[39m         expect(attempts)[33m.[39mtoBe([35m2[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 351 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'failed after 2 attempts'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 352 |[39m       }
     [90m 353 |[39m     })[33m;[39m
     [90m 354 |[39m   })[33m;[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:351:31)

  ‚óè RetryHandler ‚Ä∫ real-world scenarios ‚Ä∫ should fail fast on permission error

    expect(received).toContain(expected) // indexOf

    Expected substring: "Access denied"
    Received string:    "PERMISSION_DENIED"

    [0m [90m 385 |[39m       } [36mcatch[39m (error) {
     [90m 386 |[39m         expect(attempts)[33m.[39mtoBe([35m1[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 387 |[39m         expect(error[33m.[39mmessage)[33m.[39mtoContain([32m'Access denied'[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 388 |[39m       }
     [90m 389 |[39m     })[33m;[39m
     [90m 390 |[39m[0m

      at Object.<anonymous> (src/api/base/__tests__/RetryHandler.test.js:387:31)


Test Suites: 2 failed, 26 passed, 28 total
Tests:       15 failed, 786 passed, 801 total
Snapshots:   0 total
Time:        5.537 s
Ran all test suites.
