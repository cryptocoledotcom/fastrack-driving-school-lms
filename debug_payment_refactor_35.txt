
Running 2 tests using 1 worker

[1A[2K[1/2] [chromium] Î“Ã‡â•‘ tests\e2e\payment-integration.spec.ts:122:5 Î“Ã‡â•‘ Payment Integration Î“Ã‡â•‘ should allow enrollment in free course without payment
[1A[2K[chromium] Î“Ã‡â•‘ tests\e2e\payment-integration.spec.ts:122:5 Î“Ã‡â•‘ Payment Integration Î“Ã‡â•‘ should allow enrollment in free course without payment
ADMIN BROWSER: [vite] connecting...

[1A[2KADMIN BROWSER: [vite] connected.

[1A[2KADMIN BROWSER: %cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools font-weight:bold

[1A[2KADMIN BROWSER: FIREBASE PROJECT ID: demo-test

[1A[2KADMIN BROWSER: â‰¡Æ’Ã¶Âº Connecting to Firebase Emulators...

[1A[2KADMIN BROWSER: WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.

[1A[2KADMIN BROWSER: Î“Â£Ã  Connected to Emulators

[1A[2KADMIN BROWSER: Î“ÃœÃ¡âˆ©â••Ã… Skipping App Check initialization for demo project

[1A[2KADMIN BROWSER: Î“ÃœÃ¡âˆ©â••Ã… React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.

[1A[2KADMIN BROWSER: Î“ÃœÃ¡âˆ©â••Ã… React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

[1A[2KADMIN BROWSER: You may test your Stripe.js integration over HTTP. However, live Stripe.js integrations must use HTTPS.

[1A[2KADMIN BROWSER: JWT custom claim found for cole-admin-seed: super_admin

[1A[2KADMIN BROWSER: JWT custom claim found for cole-admin-seed: super_admin

[1A[2KADMIN BROWSER: [2025-12-12T21:47:18.992Z]  @firebase/firestore: Firestore (12.6.0): WebChannelConnection RPC 'Listen' stream 0x230cadf3 transport errored. Name: undefined Message: undefined

[1A[2KADMIN BROWSER: [vite] connecting...

[1A[2KADMIN BROWSER: [vite] connected.

[1A[2KADMIN BROWSER: %cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools font-weight:bold

[1A[2KADMIN BROWSER: FIREBASE PROJECT ID: demo-test

[1A[2KADMIN BROWSER: â‰¡Æ’Ã¶Âº Connecting to Firebase Emulators...

[1A[2KADMIN BROWSER: WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.

[1A[2KADMIN BROWSER: Î“Â£Ã  Connected to Emulators

[1A[2KADMIN BROWSER: Î“ÃœÃ¡âˆ©â••Ã… Skipping App Check initialization for demo project

[1A[2KADMIN BROWSER: Î“ÃœÃ¡âˆ©â••Ã… React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.

[1A[2KADMIN BROWSER: Î“ÃœÃ¡âˆ©â••Ã… React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

[1A[2KADMIN BROWSER: You may test your Stripe.js integration over HTTP. However, live Stripe.js integrations must use HTTPS.

[1A[2KADMIN BROWSER: JWT custom claim found for cole-admin-seed: super_admin

[1A[2KADMIN BROWSER: [vite] connecting...

[1A[2KADMIN BROWSER: [vite] connected.

[1A[2KADMIN BROWSER: %cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools font-weight:bold

[1A[2KADMIN BROWSER: FIREBASE PROJECT ID: demo-test

[1A[2KADMIN BROWSER: â‰¡Æ’Ã¶Âº Connecting to Firebase Emulators...

[1A[2KADMIN BROWSER: WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.

[1A[2KADMIN BROWSER: Î“Â£Ã  Connected to Emulators

[1A[2KADMIN BROWSER: Î“ÃœÃ¡âˆ©â••Ã… Skipping App Check initialization for demo project

[1A[2KADMIN BROWSER: Î“ÃœÃ¡âˆ©â••Ã… React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.

[1A[2KADMIN BROWSER: Î“ÃœÃ¡âˆ©â••Ã… React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

[1A[2KADMIN BROWSER: You may test your Stripe.js integration over HTTP. However, live Stripe.js integrations must use HTTPS.

[1A[2KADMIN BROWSER: JWT custom claim found for cole-admin-seed: super_admin

[1A[2KSTUDENT BROWSER: [vite] connecting...

[1A[2KSTUDENT BROWSER: [vite] connected.

[1A[2KSTUDENT BROWSER: %cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools font-weight:bold

[1A[2KSTUDENT BROWSER: FIREBASE PROJECT ID: demo-test

[1A[2KSTUDENT BROWSER: â‰¡Æ’Ã¶Âº Connecting to Firebase Emulators...

[1A[2KSTUDENT BROWSER: WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.

[1A[2KSTUDENT BROWSER: Î“Â£Ã  Connected to Emulators

[1A[2KSTUDENT BROWSER: Î“ÃœÃ¡âˆ©â••Ã… Skipping App Check initialization for demo project

[1A[2KSTUDENT BROWSER: Returning MOCKED Courses for E2E testing

[1A[2KSTUDENT BROWSER: Î“ÃœÃ¡âˆ©â••Ã… React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.

[1A[2KSTUDENT BROWSER: Î“ÃœÃ¡âˆ©â••Ã… React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

[1A[2KSTUDENT BROWSER: Returning MOCKED Courses for E2E testing

[1A[2KSTUDENT BROWSER: You may test your Stripe.js integration over HTTP. However, live Stripe.js integrations must use HTTPS.

[1A[2KSTUDENT BROWSER: DEBUG: RegisterPage handleSubmit triggered

[1A[2KSTUDENT BROWSER: DEBUG: Calling auth.register from Page

[1A[2KSTUDENT BROWSER: DEBUG: Calling createUserWithEmailAndPassword {email: student-1765576036407@fastrack.com}

[1A[2KSTUDENT BROWSER: DEBUG: Auth successful, uid: Nbd72VN9zZ7QFOyPBPhI2zqpdz2g

[1A[2KSTUDENT BROWSER: DEBUG: Creating Firestore profile for Nbd72VN9zZ7QFOyPBPhI2zqpdz2g

[1A[2KSTUDENT BROWSER: DEBUG: createUserProfile start Nbd72VN9zZ7QFOyPBPhI2zqpdz2g

[1A[2KSTUDENT BROWSER: DEBUG: setDoc calling...

[1A[2KSTUDENT BROWSER: DEBUG: setDoc complete

[1A[2KSTUDENT BROWSER: DEBUG: Profile created successfully

[1A[2KCURRENT URL: http://localhost:3000/dashboard

[1A[2KSTUDENT BROWSER: [vite] connecting...

[1A[2KSTUDENT BROWSER: [vite] connected.

[1A[2KSTUDENT BROWSER: %cDownload the React DevTools for a better development experience: https://reactjs.org/link/react-devtools font-weight:bold

[1A[2KSTUDENT BROWSER: FIREBASE PROJECT ID: demo-test

[1A[2KSTUDENT BROWSER: â‰¡Æ’Ã¶Âº Connecting to Firebase Emulators...

[1A[2KSTUDENT BROWSER: WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.

[1A[2KSTUDENT BROWSER: Î“Â£Ã  Connected to Emulators

[1A[2KSTUDENT BROWSER: Î“ÃœÃ¡âˆ©â••Ã… Skipping App Check initialization for demo project

[1A[2KSTUDENT BROWSER: Returning MOCKED Courses for E2E testing

[1A[2KSTUDENT BROWSER: Returning MOCKED Courses for E2E testing

[1A[2KSTUDENT BROWSER: Î“ÃœÃ¡âˆ©â••Ã… React Router Future Flag Warning: React Router will begin wrapping state updates in `React.startTransition` in v7. You can use the `v7_startTransition` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_starttransition.

[1A[2KSTUDENT BROWSER: Î“ÃœÃ¡âˆ©â••Ã… React Router Future Flag Warning: Relative route resolution within Splat routes is changing in v7. You can use the `v7_relativeSplatPath` future flag to opt-in early. For more information, see https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath.

[1A[2KSTUDENT BROWSER: Returning MOCKED Courses for E2E testing

[1A[2KSTUDENT BROWSER: Returning MOCKED Courses for E2E testing

[1A[2KSTUDENT BROWSER: Returning MOCKED Courses for E2E testing

[1A[2KSTUDENT BROWSER: You may test your Stripe.js integration over HTTP. However, live Stripe.js integrations must use HTTPS.

[1A[2KVISIBLE COURSES: [
  [32m'Payment Free Course Mock'[39m,
  [32m'Payment Paid Course Mock'[39m,
  [32m'BMV Certified'[39m,
  [32m'Expert Instructors'[39m,
  [32m'Flexible Schedule'[39m,
  [32m'High Success Rate'[39m,
  [32m'Fastrack Driving School'[39m,
  [32m'Quick Links'[39m,
  [32m'Legal'[39m,
  [32m'Contact Us'[39m
]

[1A[2KSTUDENT BROWSER: EnrollmentError: Invalid course ID
    at EnrollmentService.createPaidEnrollment (http://localhost:3000/src/api/enrollment/enrollmentServices.js:417:15)
    at handlePaymentSuccess (http://localhost:3000/src/pages/Courses/CoursesPage.jsx:122:29)
    at async handleEnroll (http://localhost:3000/src/pages/Courses/CoursesPage.jsx:93:9) {error: Object, context: Object}

[1A[2KSTUDENT BROWSER: Error processing enrollment: EnrollmentError: Invalid course ID
    at EnrollmentService.createPaidEnrollment (http://localhost:3000/src/api/enrollment/enrollmentServices.js:417:15)
    at handlePaymentSuccess (http://localhost:3000/src/pages/Courses/CoursesPage.jsx:122:29)
    at async handleEnroll (http://localhost:3000/src/pages/Courses/CoursesPage.jsx:93:9)

[1A[2K  1) [chromium] Î“Ã‡â•‘ tests\e2e\payment-integration.spec.ts:122:5 Î“Ã‡â•‘ Payment Integration Î“Ã‡â•‘ should allow enrollment in free course without payment 

    Error: [2mexpect([22m[31mpage[39m[2m).[22mtoHaveURL[2m([22m[32mexpected[39m[2m)[22m failed

    Expected: [32m"http://localhost:3000/[7mdashboard[27m"[39m
    Received: [31m"http://localhost:3000/[7mcourses[27m"[39m
    Timeout:  5000ms

    Call log:
    [2m  - Expect "toHaveURL" with timeout 5000ms[22m
    [2m    9 â”œÃ¹ unexpected value "http://localhost:3000/courses"[22m


      193 |
      194 |         // Verify Direct Enrollment
    > 195 |         await expect(page).toHaveURL('/dashboard');
          |                            ^
      196 |         await expect(page.locator(`text=${freeCourseTitle}`)).toBeVisible();
      197 |     });
      198 |
        at C:\Users\Cole\Documents\Antigravity Fastrack Workspace\Fastrack-Learning_Management-System\tests\e2e\payment-integration.spec.ts:195:28

    attachment #1: screenshot (image/png) Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡
    test-results\payment-integration-Paymen-3589e-free-course-without-payment-chromium\test-failed-1.png
    Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡Î“Ã¶Ã‡

    Error Context: test-results\payment-integration-Paymen-3589e-free-course-without-payment-chromium\error-context.md


[1A[2K[2/2] [chromium] Î“Ã‡â•‘ tests\e2e\payment-integration.spec.ts:199:5 Î“Ã‡â•‘ Payment Integration Î“Ã‡â•‘ should process payment for paid course
[1A[2K  1 failed
    [chromium] Î“Ã‡â•‘ tests\e2e\payment-integration.spec.ts:122:5 Î“Ã‡â•‘ Payment Integration Î“Ã‡â•‘ should allow enrollment in free course without payment 
  1 did not run

[36m  Serving HTML report at http://localhost:60757. Press Ctrl+C to quit.[39m
