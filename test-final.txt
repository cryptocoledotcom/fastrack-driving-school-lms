
> fastrack-driving-school-lms@1.0.0 test
> vitest --run


[7m[1m[36m RUN [39m[22m[27m [36mv1.6.1[39m [90mc:/Users/Cole/Documents/Fastrack/Fastrack-Learning_Management-System[39m

 [33m‚ùØ[39m src/pages/Admin/__tests__/AdminPage.comprehensive.test.js [2m ([22m[2m0 test[22m[2m)[22m
 [33m‚ùØ[39m src/context/TimerContext.test.js [2m ([22m[2m50 tests[22m [2m|[22m [31m50 failed[39m[2m)[22m[90m 105[2mms[22m[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerContext Exports[2m > [22mshould export TimerContext[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerContext Exports[2m > [22mshould export useTimer hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerContext Exports[2m > [22mshould export TimerProvider component[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mCustom Hooks Integration[2m > [22mshould import useSessionTimer hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mCustom Hooks Integration[2m > [22mshould import useBreakManagement hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mCustom Hooks Integration[2m > [22mshould import usePVQTrigger hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mCustom Hooks Integration[2m > [22mshould import useSessionData hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerProvider Structure[2m > [22mshould accept children prop[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerProvider Structure[2m > [22mshould accept courseId prop[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerProvider Structure[2m > [22mshould accept lessonId prop[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerProvider Structure[2m > [22mshould accept ipAddress prop[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerProvider Structure[2m > [22mshould return TimerContext.Provider wrapping children[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22museTimer Hook Validation[2m > [22mshould throw error when used outside provider[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22museTimer Hook Validation[2m > [22mshould return context when used inside provider[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Timer State[2m > [22mshould expose sessionTime from useSessionTimer[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Timer State[2m > [22mshould expose totalTime from useSessionTimer[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Timer State[2m > [22mshould expose isActive from useSessionTimer[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Timer State[2m > [22mshould expose isPaused from useSessionTimer[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Timer State[2m > [22mshould expose isLockedOut from useSessionTimer[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Break Management State[2m > [22mshould expose isOnBreak from useBreakManagement[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Break Management State[2m > [22mshould expose isBreakMandatory from useBreakManagement[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Break Management State[2m > [22mshould expose breakHistory from useBreakManagement[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - PVQ Trigger State[2m > [22mshould expose showPVQModal from usePVQTrigger[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - PVQ Trigger State[2m > [22mshould expose currentPVQQuestion from usePVQTrigger[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - PVQ Trigger State[2m > [22mshould expose pvqSubmitting from usePVQTrigger[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Data State[2m > [22mshould expose currentSessionId from useSessionData[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Data State[2m > [22mshould expose lessonsAccessed from useSessionData[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Data State[2m > [22mshould expose sessionHistory from useSessionData[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Timer Methods[2m > [22mshould expose startTimer from useSessionTimer[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Timer Methods[2m > [22mshould expose pauseTimer from useSessionTimer[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Timer Methods[2m > [22mshould expose resumeTimer from useSessionTimer[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Timer Methods[2m > [22mshould expose stopTimer from useSessionTimer[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Break Methods[2m > [22mshould expose startBreak from useBreakManagement[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Break Methods[2m > [22mshould expose endBreak from useBreakManagement[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - PVQ Methods[2m > [22mshould expose triggerPVQ from usePVQTrigger[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - PVQ Methods[2m > [22mshould expose closePVQModal from usePVQTrigger[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - PVQ Methods[2m > [22mshould expose submitPVQAnswer from usePVQTrigger[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Data Methods[2m > [22mshould expose createSession from useSessionData[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Data Methods[2m > [22mshould expose recordLessonAccess from useSessionData[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Data Methods[2m > [22mshould expose closeSession from useSessionData[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mBackward Compatibility - Additional Methods[2m > [22mshould preserve helper method updateVideoProgress[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mBackward Compatibility - Additional Methods[2m > [22mshould preserve helper method trackLessonAccess[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mBackward Compatibility - Additional Methods[2m > [22mshould preserve helper method formatTime[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mBackward Compatibility - Additional Methods[2m > [22mshould preserve helper method getFormattedSessionTime[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mBackward Compatibility - Additional Methods[2m > [22mshould preserve helper method getRemainingDailyTime[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mNo Breaking Changes[2m > [22mshould not break App.jsx integration[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mNo Breaking Changes[2m > [22mshould not break CoursePlayerPage.jsx integration[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mSyntax and Structure[2m > [22mshould have no syntax errors[39m
[31m     ‚Üí expected [Function] to not throw an error but 'SyntaxError: Unexpected token \'<\'' was thrown[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mSyntax and Structure[2m > [22mshould be a valid React component[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mSyntax and Structure[2m > [22mshould call all 4 custom hooks[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
 [33m‚ùØ[39m src/components/admin/tabs/__tests__/UserManagementTab.test.js [2m ([22m[2m0 test[22m[2m)[22m
[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould retry and eventually succeed[22m[39m
‚è±Ô∏è  [test-operation] Attempt 1/3 failed, retrying in 11ms: Network timeout

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould retry and eventually succeed[22m[39m
‚è±Ô∏è  [test-operation] Attempt 2/3 failed, retrying in 21ms: Network timeout

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould retry and eventually succeed[22m[39m
<empty line>
[90mstdout[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould retry and eventually succeed[22m[39m
‚úÖ [test-operation] Succeeded on attempt 3/3

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould fail immediately for non-retryable errors[22m[39m
‚ùå [test-operation] Non-retryable error on attempt 1: Invalid credentials

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould throw after max attempts exhausted[22m[39m
‚è±Ô∏è  [test-operation] Attempt 1/3 failed, retrying in 11ms: Persistent network error

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould throw after max attempts exhausted[22m[39m
‚è±Ô∏è  [test-operation] Attempt 2/3 failed, retrying in 19ms: Persistent network error

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould throw after max attempts exhausted[22m[39m
‚ùå [test-operation] Failed after 3 attempts. Last error: Persistent network error

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould throw ApiError with context information[22m[39m
‚è±Ô∏è  [updateUser] Attempt 1/3 failed, retrying in 9ms: Connection failed

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould throw ApiError with context information[22m[39m
‚è±Ô∏è  [updateUser] Attempt 2/3 failed, retrying in 19ms: Connection failed

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould throw ApiError with context information[22m[39m
‚ùå [updateUser] Failed after 3 attempts. Last error: Connection failed

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould handle async operations correctly[22m[39m
‚è±Ô∏è  [async-operation] Attempt 1/3 failed, retrying in 10ms: Network error

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould handle async operations correctly[22m[39m
<empty line>
[90mstdout[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould handle async operations correctly[22m[39m
‚úÖ [async-operation] Succeeded on attempt 2/3

 [33m‚ùØ[39m src/components/admin/tabs/__tests__/AnalyticsTab.test.js [2m ([22m[2m0 test[22m[2m)[22m
[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould use exponential backoff timing[22m[39m
‚è±Ô∏è  [timed-operation] Attempt 1/3 failed, retrying in 10ms: Network error

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould use exponential backoff timing[22m[39m
‚è±Ô∏è  [timed-operation] Attempt 2/3 failed, retrying in 21ms: Network error

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould use exponential backoff timing[22m[39m
<empty line>
[90mstdout[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould use exponential backoff timing[22m[39m
‚úÖ [timed-operation] Succeeded on attempt 3/3

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould handle errors with message property[22m[39m
‚è±Ô∏è  [test-operation] Attempt 1/3 failed, retrying in 10ms: Specific failure reason

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould handle errors with message property[22m[39m
‚è±Ô∏è  [test-operation] Attempt 2/3 failed, retrying in 19ms: Specific failure reason

 [33m‚ùØ[39m src/components/admin/__tests__/SchedulingManagement.loadingIndicators.test.js [2m ([22m[2m0 test[22m[2m)[22m
 [32m‚úì[39m src/api/errors/__tests__/ApiError.test.js [2m ([22m[2m38 tests[22m[2m)[22m[90m 47[2mms[22m[39m
[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould handle errors with message property[22m[39m
‚ùå [test-operation] Failed after 3 attempts. Last error: Specific failure reason

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould log context in thrown error[22m[39m
‚è±Ô∏è  [myOperation] Attempt 1/3 failed, retrying in 9ms: Network unavailable

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould log context in thrown error[22m[39m
‚è±Ô∏è  [myOperation] Attempt 2/3 failed, retrying in 19ms: Network unavailable

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mexecute[2m > [22m[2mshould log context in thrown error[22m[39m
‚ùå [myOperation] Failed after 3 attempts. Last error: Network unavailable

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mretryAsync convenience function[2m > [22m[2mshould work with default configuration[22m[39m
‚è±Ô∏è  [test-operation] Attempt 1/3 failed, retrying in 98ms: Network error

[90mstderr[2m | src/api/admin/__tests__/userManagementServices.test.js[2m > [22m[2mUser Management Services[2m > [22m[2mupdateUserRole[2m > [22m[2mshould throw error for invalid role[22m[39m
Error updating user role: Error: Invalid role: invalid_role
    at UserManagementService.updateUserRole [90m(c:\Users\Cole\Documents\Fastrack\Fastrack-Learning_Management-System\[39msrc\api\admin\userManagementServices.js:57:15[90m)[39m
    at [90mc:\Users\Cole\Documents\Fastrack\Fastrack-Learning_Management-System\[39msrc\api\admin\__tests__\userManagementServices.test.js:135:32
    at file:///C:/Users/Cole/Documents/Fastrack/Fastrack-Learning_Management-System/node_modules/[4m@vitest/runner[24m/dist/index.js:135:14
    at file:///C:/Users/Cole/Documents/Fastrack/Fastrack-Learning_Management-System/node_modules/[4m@vitest/runner[24m/dist/index.js:60:26
    at runTest (file:///C:/Users/Cole/Documents/Fastrack/Fastrack-Learning_Management-System/node_modules/[4m@vitest/runner[24m/dist/index.js:781:17)
    at runSuite (file:///C:/Users/Cole/Documents/Fastrack/Fastrack-Learning_Management-System/node_modules/[4m@vitest/runner[24m/dist/index.js:909:15)
    at runSuite (file:///C:/Users/Cole/Documents/Fastrack/Fastrack-Learning_Management-System/node_modules/[4m@vitest/runner[24m/dist/index.js:909:15)
    at runSuite (file:///C:/Users/Cole/Documents/Fastrack/Fastrack-Learning_Management-System/node_modules/[4m@vitest/runner[24m/dist/index.js:909:15)
    at runFiles (file:///C:/Users/Cole/Documents/Fastrack/Fastrack-Learning_Management-System/node_modules/[4m@vitest/runner[24m/dist/index.js:958:5)
    at startTests (file:///C:/Users/Cole/Documents/Fastrack/Fastrack-Learning_Management-System/node_modules/[4m@vitest/runner[24m/dist/index.js:967:3)

 [33m‚ùØ[39m src/api/admin/__tests__/userManagementServices.test.js [2m ([22m[2m26 tests[22m [2m|[22m [31m25 failed[39m[2m)[22m[90m 78[2mms[22m[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetAllUsers[2m > [22mshould fetch and return all users[39m
[31m     ‚Üí getDocs.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetAllUsers[2m > [22mshould handle empty user list[39m
[31m     ‚Üí getDocs.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetAllUsers[2m > [22mshould throw error on fetch failure[39m
[31m     ‚Üí getDocs.mockRejectedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserById[2m > [22mshould fetch user by ID[39m
[31m     ‚Üí getDoc.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserById[2m > [22mshould return null if user does not exist[39m
[31m     ‚Üí getDoc.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserById[2m > [22mshould throw error on fetch failure[39m
[31m     ‚Üí getDoc.mockRejectedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mupdateUserRole[2m > [22mshould update user role and log activity[39m
[31m     ‚Üí getDoc.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mupdateUserRole[2m > [22mshould throw error if user not found[39m
[31m     ‚Üí getDoc.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mlogActivity[2m > [22mshould log activity with timestamp[39m
[31m     ‚Üí addDoc.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mlogActivity[2m > [22mshould throw error on log failure[39m
[31m     ‚Üí addDoc.mockRejectedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetActivityLogs[2m > [22mshould fetch all activity logs[39m
[31m     ‚Üí getDocs.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetActivityLogs[2m > [22mshould filter logs by targetUserId[39m
[31m     ‚Üí getDocs.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetActivityLogs[2m > [22mshould filter logs by type[39m
[31m     ‚Üí getDocs.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetActivityLogs[2m > [22mshould throw error on fetch failure[39m
[31m     ‚Üí getDocs.mockRejectedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserActivityHistory[2m > [22mshould fetch user activity history[39m
[31m     ‚Üí getDocs.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserActivityHistory[2m > [22mshould throw error on fetch failure[39m
[31m     ‚Üí getDocs.mockRejectedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetAdminActivityHistory[2m > [22mshould fetch admin activity history[39m
[31m     ‚Üí getDocs.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetAdminActivityHistory[2m > [22mshould throw error on fetch failure[39m
[31m     ‚Üí getDocs.mockRejectedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mdeleteUser[2m > [22mshould soft delete user and log activity[39m
[31m     ‚Üí updateDoc.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mdeleteUser[2m > [22mshould throw error on delete failure[39m
[31m     ‚Üí updateDoc.mockRejectedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mrestoreUser[2m > [22mshould restore deleted user and log activity[39m
[31m     ‚Üí updateDoc.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mrestoreUser[2m > [22mshould throw error on restore failure[39m
[31m     ‚Üí updateDoc.mockRejectedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserStats[2m > [22mshould calculate user statistics by role[39m
[31m     ‚Üí getDocs.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserStats[2m > [22mshould count deleted users[39m
[31m     ‚Üí getDocs.mockResolvedValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserStats[2m > [22mshould throw error on fetch failure[39m
[31m     ‚Üí getDocs.mockRejectedValue is not a function[39m
 [33m‚ùØ[39m src/hooks/usePVQTrigger.test.js [2m ([22m[2m42 tests[22m [2m|[22m [31m42 failed[39m[2m)[22m[90m 109[2mms[22m[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mHook Creation[2m > [22mshould be a function[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mHook Creation[2m > [22mshould be a valid React hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mDMV Compliance Constants[2m > [22mshould enforce 30-minute PVQ trigger interval[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mDMV Compliance Constants[2m > [22mshould enforce random offset minimum of 5 minutes[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mDMV Compliance Constants[2m > [22mshould enforce random offset maximum of 10 minutes[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mHook Exports[2m > [22mshould export named hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mHook Exports[2m > [22mshould have default export[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mInitial State[2m > [22mshould initialize with correct default state[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mRequired State Properties[2m > [22mshould have all required state properties[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mRequired Methods[2m > [22mshould have all required methods[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mRequired Methods[2m > [22mshould export methods as useCallback[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mPVQ Triggering Logic[2m > [22mshould calculate next PVQ trigger time with random offset[39m
[31m     ‚Üí expected 'import { useState, useCallback, useEf‚Ä¶' to contain '30 * 60'[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mPVQ Triggering Logic[2m > [22mshould track PVQ start time[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mPVQ Triggering Logic[2m > [22mshould track when PVQ is submitted[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mPVQ Triggering Logic[2m > [22mshould store current PVQ question[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mOptions Handling[2m > [22mshould accept sessionTime for PVQ trigger check[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mOptions Handling[2m > [22mshould accept getRandomQuestion callback[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mOptions Handling[2m > [22mshould accept onPVQTriggered callback[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mOptions Handling[2m > [22mshould accept onPVQSubmitted callback[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mOptions Handling[2m > [22mshould handle missing options gracefully[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mModal State Management[2m > [22mshould toggle showPVQModal state[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mModal State Management[2m > [22mshould set PVQ question when triggered[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mModal State Management[2m > [22mshould clear PVQ question when closed[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mSubmission State[2m > [22mshould toggle pvqSubmitting state[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mCallback Triggers[2m > [22mshould trigger onPVQTriggered when PVQ modal opens[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mCallback Triggers[2m > [22mshould trigger onPVQSubmitted when answer is submitted[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mRandom Trigger Intervals[2m > [22mshould calculate offset within specified range[39m
[31m     ‚Üí expected 'import { useState, useCallback, useEf‚Ä¶' to contain '5 * 60'[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mRandom Trigger Intervals[2m > [22mshould add offset to base trigger interval[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mReturn Object Structure[2m > [22mshould return object with all state properties[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useState hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useCallback for methods[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useEffect for PVQ trigger checking[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useRef for tracking[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mReact Hooks Usage[2m > [22mshould import hooks from react[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mCompliance with Step 1.3.3 Requirements[2m > [22mshould have all required state properties[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mCompliance with Step 1.3.3 Requirements[2m > [22mshould have all required methods[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mCompliance with Step 1.3.3 Requirements[2m > [22mshould implement random trigger intervals[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mNo Breaking Changes[2m > [22mshould not modify TimerContext[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mNo Breaking Changes[2m > [22mshould not break existing App.jsx integration[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mSyntax and Structure[2m > [22mshould have no syntax errors[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mSyntax and Structure[2m > [22mshould export hook as default export[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mSyntax and Structure[2m > [22mshould also export as named export[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
 [33m‚ùØ[39m src/hooks/useBreakManagement.test.js [2m ([22m[2m42 tests[22m [2m|[22m [31m42 failed[39m[2m)[22m[90m 101[2mms[22m[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mHook Creation[2m > [22mshould be a function[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mHook Creation[2m > [22mshould be a valid React hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mDMV Compliance Constants[2m > [22mshould enforce 2-hour break requirement threshold[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mDMV Compliance Constants[2m > [22mshould enforce 10-minute minimum break duration[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mHook Exports[2m > [22mshould export named hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mHook Exports[2m > [22mshould have default export[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mInitial State[2m > [22mshould initialize with correct default state[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mRequired State Properties[2m > [22mshould have all required state properties[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mRequired Methods[2m > [22mshould have all required methods[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mRequired Methods[2m > [22mshould export methods as useCallback[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mRequired Getters[2m > [22mshould have all required getter properties[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mOptions Handling[2m > [22mshould accept sessionTime for break tracking[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mOptions Handling[2m > [22mshould accept onBreakRequired callback[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mOptions Handling[2m > [22mshould accept onBreakEnded callback[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak Tracking Logic[2m > [22mshould track break start time when break starts[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak Tracking Logic[2m > [22mshould maintain break history array[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak Tracking Logic[2m > [22mshould calculate current break duration[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak Tracking Logic[2m > [22mshould identify when break is due[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak Duration Validation[2m > [22mshould enforce minimum break duration of 10 minutes[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak Duration Validation[2m > [22mshould check if minimum break is met[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak State Management[2m > [22mshould toggle isOnBreak state when starting break[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak State Management[2m > [22mshould toggle isOnBreak state when ending break[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak State Management[2m > [22mshould set isBreakMandatory when break is required[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak History Tracking[2m > [22mshould record breaks in history array[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak History Tracking[2m > [22mshould include break duration in history[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak History Tracking[2m > [22mshould include break timestamp in history[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mCallback Triggers[2m > [22mshould trigger onBreakRequired callback when break is due[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mCallback Triggers[2m > [22mshould trigger onBreakEnded callback when break ends[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mReturn Object Structure[2m > [22mshould return object with all state properties[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useState hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useCallback for methods[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useEffect for break tracking[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useRef for tracking[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mReact Hooks Usage[2m > [22mshould import hooks from react[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mCompliance with Step 1.3.2 Requirements[2m > [22mshould have all required state properties[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mCompliance with Step 1.3.2 Requirements[2m > [22mshould have all required methods[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mCompliance with Step 1.3.2 Requirements[2m > [22mshould have all required getters[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mNo Breaking Changes[2m > [22mshould not modify TimerContext[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mNo Breaking Changes[2m > [22mshould not break existing App.jsx integration[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mSyntax and Structure[2m > [22mshould have no syntax errors[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mSyntax and Structure[2m > [22mshould export hook as default export[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mSyntax and Structure[2m > [22mshould also export as named export[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mretryAsync convenience function[2m > [22m[2mshould work with default configuration[22m[39m
<empty line>
[90mstdout[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mretryAsync convenience function[2m > [22m[2mshould work with default configuration[22m[39m
‚úÖ [test-operation] Succeeded on attempt 2/3

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mretryAsync convenience function[2m > [22m[2mshould throw after max attempts[22m[39m
‚è±Ô∏è  [test-operation] Attempt 1/3 failed, retrying in 90ms: Persistent error

 [33m‚ùØ[39m src/api/base/__tests__/ServiceBase.test.js [2m ([22m[2m25 tests[22m [2m|[22m [31m25 failed[39m[2m)[22m[90m 40[2mms[22m[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mConstructor[2m > [22mshould set serviceName[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mConstructor[2m > [22mshould expose validators as this.validate[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetCurrentUser[2m > [22mshould return current user if authenticated[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetCurrentUser[2m > [22mshould throw ApiError if not authenticated[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetCurrentUser[2m > [22mshould throw error with AUTH_ERROR code[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetCurrentUserId[2m > [22mshould return user UID when authenticated[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetCurrentUserId[2m > [22mshould throw error when not authenticated[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetDoc[2m > [22mshould retrieve and format document[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetDoc[2m > [22mshould throw NOT_FOUND error if document missing[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetDoc[2m > [22mshould catch and map Firebase errors[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22msetDoc[2m > [22mshould set document data[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22msetDoc[2m > [22mshould handle Firebase errors[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mupdateDoc[2m > [22mshould update document[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mupdateDoc[2m > [22mshould validate updates before writing[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mdeleteDoc[2m > [22mshould delete document[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mdeleteDoc[2m > [22mshould handle Firebase errors[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mbatch[2m > [22mshould return batch instance[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mbatch[2m > [22mshould execute multiple operations[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mlog[2m > [22mshould use LoggingService for logging[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mlogError[2m > [22mshould log errors with service context[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mlogError[2m > [22mshould handle errors without code[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetCollection[2m > [22mshould return formatted documents[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetCollection[2m > [22mshould apply filters correctly[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mError handling[2m > [22mshould throw ApiError for all operations[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mError handling[2m > [22mshould not double-wrap ApiErrors[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mretryAsync convenience function[2m > [22m[2mshould throw after max attempts[22m[39m
‚è±Ô∏è  [test-operation] Attempt 2/3 failed, retrying in 190ms: Persistent error

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mretryAsync convenience function[2m > [22m[2mshould throw after max attempts[22m[39m
‚ùå [test-operation] Failed after 3 attempts. Last error: Persistent error

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mcreateRetryHandler factory[2m > [22m[2mshould work with custom handler[22m[39m
‚è±Ô∏è  [test] Attempt 1/2 failed, retrying in 5ms: Error

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mcreateRetryHandler factory[2m > [22m[2mshould work with custom handler[22m[39m
‚ùå [test] Failed after 2 attempts. Last error: Error

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mreal-world scenarios[2m > [22m[2mshould handle temporary network failure[22m[39m
‚è±Ô∏è  [fetchData] Attempt 1/3 failed, retrying in 10ms: Network error

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mreal-world scenarios[2m > [22m[2mshould handle temporary network failure[22m[39m
‚è±Ô∏è  [fetchData] Attempt 2/3 failed, retrying in 18ms: Network error

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mreal-world scenarios[2m > [22m[2mshould handle temporary network failure[22m[39m
<empty line>
[90mstdout[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mreal-world scenarios[2m > [22m[2mshould handle temporary network failure[22m[39m
‚úÖ [fetchData] Succeeded on attempt 3/3

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mreal-world scenarios[2m > [22m[2mshould fail fast on permission error[22m[39m
‚ùå [updateDocument] Non-retryable error on attempt 1: Access denied

[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mreal-world scenarios[2m > [22m[2mshould recover from server temporarily unavailable[22m[39m
‚è±Ô∏è  [submitForm] Attempt 1/3 failed, retrying in 10ms: Service unavailable

 [33m‚ùØ[39m src/components/common/ErrorBoundary/ErrorBoundary.test.js [2m ([22m[2m0 test[22m[2m)[22m
 [33m‚ùØ[39m src/api/base/__tests__/RetryHandler.test.js [2m ([22m[2m31 tests[22m [2m|[22m [31m9 failed[39m[2m)[22m[33m 973[2mms[22m[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mexecute[2m > [22mshould fail immediately for non-retryable errors[39m
[31m     ‚Üí expected 'UNAUTHENTICATED' to contain 'Invalid credentials'[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mexecute[2m > [22mshould throw after max attempts exhausted[39m
[31m     ‚Üí expected 'RETRY_EXHAUSTED' to contain 'failed after 3 attempts'[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mexecute[2m > [22mshould throw ApiError with context information[39m
[31m     ‚Üí expected 'RETRY_EXHAUSTED' to contain 'failed after 3 attempts'[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mexecute[2m > [22mshould validate operation parameter[39m
[31m     ‚Üí expected 'INVALID_OPERATION' to contain 'must be a function'[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mexecute[2m > [22mshould handle errors with message property[39m
[31m     ‚Üí expected 'RETRY_EXHAUSTED' to contain 'failed after 3 attempts'[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mexecute[2m > [22mshould log context in thrown error[39m
[31m     ‚Üí expected 'RETRY_EXHAUSTED' to contain 'myOperation'[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mretryAsync convenience function[2m > [22mshould throw after max attempts[39m
[31m     ‚Üí expected 'RETRY_EXHAUSTED' to contain 'failed after'[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mcreateRetryHandler factory[2m > [22mshould work with custom handler[39m
[31m     ‚Üí expected 'RETRY_EXHAUSTED' to contain 'failed after 2 attempts'[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mreal-world scenarios[2m > [22mshould fail fast on permission error[39m
[31m     ‚Üí expected 'PERMISSION_DENIED' to contain 'Access denied'[39m
[90mstderr[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mreal-world scenarios[2m > [22m[2mshould recover from server temporarily unavailable[22m[39m
<empty line>
[90mstdout[2m | src/api/base/__tests__/RetryHandler.test.js[2m > [22m[2mRetryHandler[2m > [22m[2mreal-world scenarios[2m > [22m[2mshould recover from server temporarily unavailable[22m[39m
‚úÖ [submitForm] Succeeded on attempt 2/3

 [32m‚úì[39m src/services/__tests__/loggingService.test.js [2m ([22m[2m50 tests[22m[2m)[22m[90m 167[2mms[22m[39m
 [33m‚ùØ[39m src/hooks/useSessionData.test.js [2m ([22m[2m45 tests[22m [2m|[22m [31m45 failed[39m[2m)[22m[90m 171[2mms[22m[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mHook Creation[2m > [22mshould be a function[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mHook Creation[2m > [22mshould be a valid React hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mHook Exports[2m > [22mshould export named hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mHook Exports[2m > [22mshould have default export[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mInitial State[2m > [22mshould initialize with correct default state[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mRequired State Properties[2m > [22mshould have all required state properties[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mRequired Methods[2m > [22mshould have all required methods[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mRequired Methods[2m > [22mshould export methods as useCallback[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mRequired Getters[2m > [22mshould have all required getter properties[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mOptions Handling[2m > [22mshould accept optional callbacks in options[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mOptions Handling[2m > [22mshould accept onSessionCreated callback[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mOptions Handling[2m > [22mshould accept onLessonAccessed callback[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mOptions Handling[2m > [22mshould accept onSessionClosed callback[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Creation[2m > [22mshould create session with ID[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Creation[2m > [22mshould initialize lessons accessed array for new session[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Creation[2m > [22mshould create current session object with metadata[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Creation[2m > [22mshould trigger onSessionCreated callback[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mLesson Access Recording[2m > [22mshould add lesson ID to lessonsAccessed array[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mLesson Access Recording[2m > [22mshould prevent duplicate lesson entries[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mLesson Access Recording[2m > [22mshould trigger onLessonAccessed callback[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Closure[2m > [22mshould close current session[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Closure[2m > [22mshould move closed session to session history[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Closure[2m > [22mshould clear lessons accessed array on close[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Closure[2m > [22mshould set end time for closed session[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Closure[2m > [22mshould trigger onSessionClosed callback[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Data Structure[2m > [22mshould track session ID[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Data Structure[2m > [22mshould track lesson IDs accessed[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Data Structure[2m > [22mshould track start time[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Data Structure[2m > [22mshould track end time when session closes[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mLesson Count Getter[2m > [22mshould calculate number of lessons accessed[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mLesson Count Getter[2m > [22mshould use lessonsAccessed array length[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Count Getter[2m > [22mshould calculate number of sessions in history[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Count Getter[2m > [22mshould use sessionHistory array length[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mReturn Object Structure[2m > [22mshould return object with all state properties[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useState hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useCallback for methods[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mReact Hooks Usage[2m > [22mshould import hooks from react[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mCompliance with Step 1.3.4 Requirements[2m > [22mshould have all required state properties[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mCompliance with Step 1.3.4 Requirements[2m > [22mshould have all required methods[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mCompliance with Step 1.3.4 Requirements[2m > [22mshould have all required getters[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mNo Breaking Changes[2m > [22mshould not modify TimerContext[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mNo Breaking Changes[2m > [22mshould not break existing App.jsx integration[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSyntax and Structure[2m > [22mshould have no syntax errors[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSyntax and Structure[2m > [22mshould export hook as default export[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSyntax and Structure[2m > [22mshould also export as named export[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
 [33m‚ùØ[39m src/api/base/__tests__/QueryHelper.test.js [2m ([22m[2m21 tests[22m [2m|[22m [31m21 failed[39m[2m)[22m[33m 304[2mms[22m[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mpaginate[2m > [22mshould retrieve first page with pagination metadata[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mpaginate[2m > [22mshould apply filters when provided[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mpaginate[2m > [22mshould apply ordering when provided[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mpaginate[2m > [22mshould indicate hasNextPage = true when total > pageSize[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mpaginate[2m > [22mshould throw ApiError on query failure[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetNextPage[2m > [22mshould retrieve next page using cursor[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetNextPage[2m > [22mshould throw error if lastVisible is null[39m
[31m     ‚Üí expected Error: Invalid pagination cursor { ‚Ä¶(3) } to be an instance of ApiError[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetNextPage[2m > [22mshould indicate hasNextPage = false when fewer docs than pageSize returned[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetNextPage[2m > [22mshould throw ApiError on query failure[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetPageAtIndex[2m > [22mshould retrieve specific page by number[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetPageAtIndex[2m > [22mshould throw error if pageNumber < 1[39m
[31m     ‚Üí expected Error: Page number must be greater than 0 { ‚Ä¶(3) } to be an instance of ApiError[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetPageAtIndex[2m > [22mshould calculate correct skip count for pagination[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetPageAtIndex[2m > [22mshould have hasPreviousPage = false on first page[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetPageAtIndex[2m > [22mshould have hasNextPage = false on last page[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetPageAtIndex[2m > [22mshould throw ApiError on query failure[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetCollectionCount[2m > [22mshould return collection document count[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetCollectionCount[2m > [22mshould apply filters when provided[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetCollectionCount[2m > [22mshould throw ApiError on query failure[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetCollectionCount[2m > [22mshould return 0 for empty collection[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mIntegration scenarios[2m > [22mshould handle multiple filters correctly[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mIntegration scenarios[2m > [22mshould handle pagination chain: first -> next -> next[39m
[31m     ‚Üí firebaseFirestore.collection.mockReturnValue is not a function[39m
 [32m‚úì[39m src/api/admin/__tests__/analyticsServices.test.js [2m ([22m[2m35 tests[22m[2m)[22m[90m 119[2mms[22m[39m
 [33m‚ùØ[39m src/context/ModalContext.test.js [2m ([22m[2m0 test[22m[2m)[22m
 [33m‚ùØ[39m src/components/common/Quiz/Quiz.test.js [2m ([22m[2m0 test[22m[2m)[22m
 [33m‚ùØ[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js [2m ([22m[2m16 tests[22m [2m|[22m [31m16 failed[39m[2m)[22m[90m 120[2mms[22m[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mupdateEnrollmentAfterPayment - Atomic Operations[2m > [22mshould validate userId before atomic operation[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mupdateEnrollmentAfterPayment - Atomic Operations[2m > [22mshould validate courseId before atomic operation[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mupdateEnrollmentAfterPayment - Atomic Operations[2m > [22mshould throw error if enrollment not found[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mupdateEnrollmentAfterPayment - Atomic Operations[2m > [22mshould use atomic operations with batch updates[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mupdateEnrollmentAfterPayment - Atomic Operations[2m > [22mshould handle negative amounts (decrement)[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mupdateEnrollmentAfterPayment - Atomic Operations[2m > [22mshould set correct status when payment completed[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mpayRemainingBalance - Atomic Operations[2m > [22mshould validate payment amount[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mpayRemainingBalance - Atomic Operations[2m > [22mshould throw error if enrollment not found[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mpayRemainingBalance - Atomic Operations[2m > [22mshould use atomic batch operations[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mpayRemainingBalance - Atomic Operations[2m > [22mshould handle remaining balance correctly[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mAtomic Operations - Consistency[2m > [22mshould not lose updates with concurrent operations[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mAtomic Operations - Consistency[2m > [22mshould handle partial payment scenarios[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mError Handling with Atomic Operations[2m > [22mshould not commit batch on validation error[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mError Handling with Atomic Operations[2m > [22mshould handle enrollment not found without batch commit[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mReturn Values After Atomic Update[2m > [22mshould return correct values after successful atomic update[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mReturn Values After Atomic Update[2m > [22mshould return correct payment status values[39m
[31m     ‚Üí Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
 [33m‚ùØ[39m src/context/CourseContext.test.js [2m ([22m[2m0 test[22m[2m)[22m
 [33m‚ùØ[39m src/context/AuthContext.test.js [2m ([22m[2m0 test[22m[2m)[22m
 [33m‚ùØ[39m src/components/admin/tabs/__tests__/UserManagementTab.createUser.integration.test.js [2m ([22m[2m0 test[22m[2m)[22m
 [32m‚úì[39m src/constants/__tests__/userRoles.assignment.test.js [2m ([22m[2m35 tests[22m[2m)[22m[90m 29[2mms[22m[39m
 [33m‚ùØ[39m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js [2m ([22m[2m13 tests[22m [2m|[22m [31m13 failed[39m[2m)[22m[90m 54[2mms[22m[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mInput Validation[2m > [22mshould throw ValidationError for invalid userId[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mInput Validation[2m > [22mshould throw ValidationError for invalid courseId[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mInput Validation[2m > [22mshould throw ValidationError for non-string userEmail[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mDuplicate Detection[2m > [22mshould return existing enrollment if already enrolled[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mEnrollment Creation[2m > [22mshould create enrollment with correct data for regular user[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mEnrollment Creation[2m > [22mshould create admin enrollment with correct status[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mEnrollment Creation[2m > [22mshould return created enrollment with id[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mEnrollment Creation[2m > [22mshould include required timestamp and enrollment fields[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mEnrollment Creation[2m > [22mshould call correct Firestore path for document[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mError Handling[2m > [22mshould throw EnrollmentError for invalid courseId pricing[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mError Handling[2m > [22mshould rethrow caught errors[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mAdmin Email Detection[2m > [22mshould recognize admin email (case insensitive)[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mAdmin Email Detection[2m > [22mshould not recognize non-admin email[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
 [33m‚ùØ[39m src/pages/Admin/__tests__/AdminPage.userManagement.integration.test.js [2m ([22m[2m0 test[22m[2m)[22m
 [33m‚ùØ[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js [2m ([22m[2m19 tests[22m [2m|[22m [31m19 failed[39m[2m)[22m[90m 56[2mms[22m[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mInput Validation[2m > [22mshould throw ValidationError for invalid userId[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mInput Validation[2m > [22mshould throw ValidationError for invalid courseId[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mReset Logic[2m > [22mshould reset single enrollment to PENDING_PAYMENT status[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mReset Logic[2m > [22mshould include updatedAt timestamp[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mReset Logic[2m > [22mshould call updateDoc with correct path and data[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mReset Logic[2m > [22mshould clear payment info (amountPaid to 0)[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mReset Logic[2m > [22mshould set access status to LOCKED[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mReset Logic[2m > [22mshould log successful reset[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mError Handling[2m > [22mshould handle updateDoc errors gracefully[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mError Handling[2m > [22mshould rethrow errors after logging[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mData Integrity[2m > [22mshould reset multiple enrollments independently[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mData Integrity[2m > [22mshould not modify other user data[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mRace Conditions[2m > [22mshould handle concurrent reset calls on same enrollment[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetUserEnrollmentsToPending()[2m > [22mInput Validation[2m > [22mshould throw ValidationError for invalid userId[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetUserEnrollmentsToPending()[2m > [22mError Handling[2m > [22mshould handle getUserEnrollments errors[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetUserEnrollmentsToPending()[2m > [22mError Handling[2m > [22mshould rethrow caught errors[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetUserEnrollmentsToPending()[2m > [22mError Handling[2m > [22mshould log errors with context[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mState Consistency[2m > [22mshould return consistent state after reset[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
[31m   [33m‚ùØ[31m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mState Consistency[2m > [22mshould not leak sensitive fields[39m
[31m     ‚Üí default.validate.validateUserId.mockImplementation is not a function[39m
 [33m‚ùØ[39m src/api/base/__tests__/CacheService.test.js [2m ([22m[2m32 tests[22m [2m|[22m [31m32 failed[39m[2m)[22m[90m 77[2mms[22m[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mset()[2m > [22mshould store a value in cache[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mset()[2m > [22mshould overwrite existing key[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mset()[2m > [22mshould store different types of values[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mset()[2m > [22mshould store null values[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mset()[2m > [22mshould handle numeric keys by converting to string[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mget()[2m > [22mshould retrieve cached value[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mget()[2m > [22mshould return null if key does not exist[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mget()[2m > [22mshould return null if entry has expired[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mget()[2m > [22mshould return value before TTL expires[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mget()[2m > [22mshould return value if no TTL provided[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mget()[2m > [22mshould automatically clean up expired entries on get()[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22minvalidate()[2m > [22mshould remove a single entry from cache[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22minvalidate()[2m > [22mshould handle invalidating non-existent key gracefully[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22minvalidate()[2m > [22mshould remove TTL timeout when invalidating[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22minvalidate()[2m > [22mshould not affect other cache entries[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mclear()[2m > [22mshould remove all entries from cache[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mclear()[2m > [22mshould clear all TTL timeouts[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mclear()[2m > [22mshould allow adding new entries after clearing[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mTTL (time-to-live)[2m > [22mshould use default TTL if provided[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mTTL (time-to-live)[2m > [22mshould honor different TTLs for different entries[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mTTL (time-to-live)[2m > [22mshould not expire entries without TTL[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mTTL (time-to-live)[2m > [22mshould expire exactly at TTL boundary[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22medge cases[2m > [22mshould handle cache hits and misses in sequence[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22medge cases[2m > [22mshould handle rapid set and get operations[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22medge cases[2m > [22mshould handle special characters in keys[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22medge cases[2m > [22mshould handle large objects[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22medge cases[2m > [22mshould not interfere with prototype chain[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mintegration scenarios[2m > [22mshould handle cache invalidation and re-population[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mintegration scenarios[2m > [22mshould handle mixed TTL and non-TTL entries[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mintegration scenarios[2m > [22mshould handle multiple clears[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mintegration scenarios[2m > [22mshould handle invalidate after expiration[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mintegration scenarios[2m > [22mshould maintain cache between get operations[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
 [32m‚úì[39m src/__tests__/firestore.rules.test.js [2m ([22m[2m25 tests[22m[2m)[22m[90m 37[2mms[22m[39m
 [33m‚ùØ[39m src/hooks/useSessionTimer.test.js [2m ([22m[2m26 tests[22m [2m|[22m [31m26 failed[39m[2m)[22m[90m 102[2mms[22m[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mHook Creation[2m > [22mshould be a function[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mHook Creation[2m > [22mshould be a valid React hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mDMV Compliance Constants[2m > [22mshould enforce 4-hour daily maximum[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mDMV Compliance Constants[2m > [22mshould enforce 2-hour break requirement[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mHook Methods[2m > [22mshould export named hook[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mHook Methods[2m > [22mshould have default export[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mReturn Object Structure[2m > [22mshould return object with expected state properties[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mConstants Preservation[2m > [22mshould preserve MAX_DAILY_HOURS for DMV compliance[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mConstants Preservation[2m > [22mshould preserve BREAK_REQUIRED_AFTER for DMV compliance[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mHook Methods Available[2m > [22mshould expose required method signatures[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mHook Methods Available[2m > [22mshould return state properties[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mHook Methods Available[2m > [22mshould return getter properties[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mNo Breaking Changes[2m > [22mshould not modify TimerContext[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mNo Breaking Changes[2m > [22mshould not break existing App.jsx integration[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mOptions Handling[2m > [22mshould accept optional callbacks[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mOptions Handling[2m > [22mshould handle missing options gracefully[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mCompliance with Step 1.3.1 Requirements[2m > [22mshould have all required state properties[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mCompliance with Step 1.3.1 Requirements[2m > [22mshould have all required methods[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mCompliance with Step 1.3.1 Requirements[2m > [22mshould have all required getters[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mCompliance with Step 1.3.1 Requirements[2m > [22mshould check daily lockout on demand[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mCompliance with Step 1.3.1 Requirements[2m > [22mshould increment timer every 1 second[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mExport Validation[2m > [22mshould export hook as default export[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mExport Validation[2m > [22mshould also export as named export[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mSyntax and Structure[2m > [22mshould have no syntax errors[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mSyntax and Structure[2m > [22mshould use React hooks correctly[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mSyntax and Structure[2m > [22mshould import React hooks from react[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
 [33m‚ùØ[39m src/api/student/__tests__/userServices.getAllStudents.test.js [2m ([22m[2m6 tests[22m [2m|[22m [31m6 failed[39m[2m)[22m[90m 24[2mms[22m[39m
[31m   [33m‚ùØ[31m src/api/student/__tests__/userServices.getAllStudents.test.js[2m > [22mUser Services - getAllStudents[2m > [22mshould fetch all students with role STUDENT[39m
[31m     ‚Üí collection.mockReturnValueOnce is not a function[39m
[31m   [33m‚ùØ[31m src/api/student/__tests__/userServices.getAllStudents.test.js[2m > [22mUser Services - getAllStudents[2m > [22mshould sort students by displayName[39m
[31m     ‚Üí collection.mockReturnValueOnce is not a function[39m
[31m   [33m‚ùØ[31m src/api/student/__tests__/userServices.getAllStudents.test.js[2m > [22mUser Services - getAllStudents[2m > [22mshould sort by email when displayName is not available[39m
[31m     ‚Üí collection.mockReturnValueOnce is not a function[39m
[31m   [33m‚ùØ[31m src/api/student/__tests__/userServices.getAllStudents.test.js[2m > [22mUser Services - getAllStudents[2m > [22mshould return empty array when no students exist[39m
[31m     ‚Üí collection.mockReturnValueOnce is not a function[39m
[31m   [33m‚ùØ[31m src/api/student/__tests__/userServices.getAllStudents.test.js[2m > [22mUser Services - getAllStudents[2m > [22mshould include all student data fields[39m
[31m     ‚Üí collection.mockReturnValueOnce is not a function[39m
[31m   [33m‚ùØ[31m src/api/student/__tests__/userServices.getAllStudents.test.js[2m > [22mUser Services - getAllStudents[2m > [22mshould use query filter for STUDENT role[39m
[31m     ‚Üí collection.mockReturnValueOnce is not a function[39m
 [33m‚ùØ[39m src/components/auth/__tests__/ForcePasswordChangeModal.integration.test.js [2m ([22m[2m0 test[22m[2m)[22m
 [33m‚ùØ[39m src/pages/CoursePlayer/CoursePlayerPage.quiz.integration.test.js [2m ([22m[2m0 test[22m[2m)[22m
 [33m‚ùØ[39m functions/src/compliance/sessionHeartbeat.test.js [2m ([22m[2m0 test[22m[2m)[22m
 [32m‚úì[39m src/api/enrollment/__tests__/enrollmentServices.checkCourseAccess.test.js [2m ([22m[2m9 tests[22m[2m)[22m[90m 19[2mms[22m[39m
 [33m‚ùØ[39m src/hooks/useComplianceHeartbeat.test.js [2m ([22m[2m6 tests[22m [2m|[22m [31m6 failed[39m[2m)[22m[90m 13[2mms[22m[39m
[31m   [33m‚ùØ[31m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould call heartbeat function every 60 seconds[39m
[31m     ‚Üí httpsCallable.mockReturnValue is not a function[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould call onHeartbeatSuccess callback on successful heartbeat[39m
[31m     ‚Üí httpsCallable.mockReturnValue is not a function[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould call onLimitReached when daily limit is exceeded[39m
[31m     ‚Üí httpsCallable.mockReturnValue is not a function[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould not send heartbeat when disabled[39m
[31m     ‚Üí httpsCallable.mockReturnValue is not a function[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould not send heartbeat without required parameters[39m
[31m     ‚Üí httpsCallable.mockReturnValue is not a function[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
[31m   [33m‚ùØ[31m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould call onHeartbeatError callback on error[39m
[31m     ‚Üí httpsCallable.mockReturnValue is not a function[39m
[31m     ‚Üí jest.runOnlyPendingTimers is not a function[39m
 [32m‚úì[39m src/utils/__tests__/dateTimeFormatter.test.js [2m ([22m[2m11 tests[22m[2m)[22m[90m 7[2mms[22m[39m
 [33m‚ùØ[39m src/components/admin/__tests__/SchedulingManagement.assignment.test.js [2m ([22m[2m0 test[22m[2m)[22m
 [33m‚ùØ[39m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js [2m ([22m[2m9 tests[22m [2m|[22m [31m9 failed[39m[2m)[22m[90m 11[2mms[22m[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould call httpsCallable with createUser function name[39m
[31m     ‚Üí httpsCallable.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould pass email, temporary password, display name, and role to Cloud Function[39m
[31m     ‚Üí httpsCallable.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould return user data on successful creation[39m
[31m     ‚Üí httpsCallable.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould use email prefix as displayName when empty[39m
[31m     ‚Üí httpsCallable.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould handle Cloud Function errors[39m
[31m     ‚Üí httpsCallable.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould handle authentication errors[39m
[31m     ‚Üí httpsCallable.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould handle permission errors for non-super-admins[39m
[31m     ‚Üí httpsCallable.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould automatically set role to DMV_ADMIN[39m
[31m     ‚Üí httpsCallable.mockReturnValue is not a function[39m
[31m   [33m‚ùØ[31m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould handle network errors[39m
[31m     ‚Üí httpsCallable.mockReturnValue is not a function[39m
 [32m‚úì[39m src/api/compliance/__tests__/schedulingServices.assignment.test.js [2m ([22m[2m3 tests[22m[2m)[22m[90m 2[2mms[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1m[7m Failed Suites 15 [27m[22m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[31m[1m[7m FAIL [27m[22m[39m src/context/AuthContext.test.js [2m[ src/context/AuthContext.test.js ][22m
[31m[1m[7m FAIL [27m[22m[39m src/context/CourseContext.test.js [2m[ src/context/CourseContext.test.js ][22m
[31m[1m[7m FAIL [27m[22m[39m src/context/ModalContext.test.js [2m[ src/context/ModalContext.test.js ][22m
[31m[1m[7m FAIL [27m[22m[39m functions/src/compliance/sessionHeartbeat.test.js [2m[ functions/src/compliance/sessionHeartbeat.test.js ][22m
[31m[1m[7m FAIL [27m[22m[39m src/pages/CoursePlayer/CoursePlayerPage.quiz.integration.test.js [2m[ src/pages/CoursePlayer/CoursePlayerPage.quiz.integration.test.js ][22m
[31m[1m[7m FAIL [27m[22m[39m src/components/auth/__tests__/ForcePasswordChangeModal.integration.test.js [2m[ src/components/auth/__tests__/ForcePasswordChangeModal.integration.test.js ][22m
[31m[1m[7m FAIL [27m[22m[39m src/components/common/ErrorBoundary/ErrorBoundary.test.js [2m[ src/components/common/ErrorBoundary/ErrorBoundary.test.js ][22m
[31m[1m[7m FAIL [27m[22m[39m src/pages/Admin/__tests__/AdminPage.comprehensive.test.js [2m[ src/pages/Admin/__tests__/AdminPage.comprehensive.test.js ][22m
[31m[1m[7m FAIL [27m[22m[39m src/pages/Admin/__tests__/AdminPage.userManagement.integration.test.js [2m[ src/pages/Admin/__tests__/AdminPage.userManagement.integration.test.js ][22m
[31m[1m[7m FAIL [27m[22m[39m src/components/admin/tabs/__tests__/AnalyticsTab.test.js [2m[ src/components/admin/tabs/__tests__/AnalyticsTab.test.js ][22m
[31m[1mError[22m: Failed to parse source for import analysis because the content contains invalid JS syntax. If you are using JSX, make sure to name the file with the .jsx or .tsx extension.[39m
[90m [2m‚ùØ[22m TransformPluginContext._formatError node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49258:41[22m[39m
[90m [2m‚ùØ[22m TransformPluginContext.error node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49253:16[22m[39m
[90m [2m‚ùØ[22m TransformPluginContext.transform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64259:14[22m[39m
[90m [2m‚ùØ[22m PluginContainer.transform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49099:18[22m[39m
[90m [2m‚ùØ[22m loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m51978:27[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/components/admin/__tests__/SchedulingManagement.assignment.test.js [2m[ src/components/admin/__tests__/SchedulingManagement.assignment.test.js ][22m
[31m[1m[7m FAIL [27m[22m[39m src/components/admin/__tests__/SchedulingManagement.loadingIndicators.test.js [2m[ src/components/admin/__tests__/SchedulingManagement.loadingIndicators.test.js ][22m
[31m[1m[7m FAIL [27m[22m[39m src/components/common/Quiz/Quiz.test.js [2m[ src/components/common/Quiz/Quiz.test.js ][22m
[31m[1m[7m FAIL [27m[22m[39m src/components/admin/tabs/__tests__/UserManagementTab.createUser.integration.test.js [2m[ src/components/admin/tabs/__tests__/UserManagementTab.createUser.integration.test.js ][22m
[31m[1m[7m FAIL [27m[22m[39m src/components/admin/tabs/__tests__/UserManagementTab.test.js [2m[ src/components/admin/tabs/__tests__/UserManagementTab.test.js ][22m
[31m[1mError[22m: Expression expected[39m
[90m [2m‚ùØ[22m getRollupError node_modules/vite/node_modules/rollup/dist/es/shared/parseAst.js:[2m401:41[22m[39m
[90m [2m‚ùØ[22m convertProgram node_modules/vite/node_modules/rollup/dist/es/shared/parseAst.js:[2m1098:26[22m[39m
[90m [2m‚ùØ[22m parseAstAsync node_modules/vite/node_modules/rollup/dist/es/shared/parseAst.js:[2m2084:106[22m[39m
[90m [2m‚ùØ[22m ssrTransformScript node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m52430:11[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[2/410]‚éØ[22m[39m

[31m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[1m[7m Failed Tests 386 [27m[22m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39m

[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerContext Exports[2m > [22mshould export TimerContext
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerContext Exports[2m > [22mshould export useTimer hook
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerContext Exports[2m > [22mshould export TimerProvider component
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mCustom Hooks Integration[2m > [22mshould import useSessionTimer hook
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mCustom Hooks Integration[2m > [22mshould import useBreakManagement hook
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mCustom Hooks Integration[2m > [22mshould import usePVQTrigger hook
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mCustom Hooks Integration[2m > [22mshould import useSessionData hook
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerProvider Structure[2m > [22mshould accept children prop
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerProvider Structure[2m > [22mshould accept courseId prop
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerProvider Structure[2m > [22mshould accept lessonId prop
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerProvider Structure[2m > [22mshould accept ipAddress prop
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mTimerProvider Structure[2m > [22mshould return TimerContext.Provider wrapping children
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22museTimer Hook Validation[2m > [22mshould throw error when used outside provider
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22museTimer Hook Validation[2m > [22mshould return context when used inside provider
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Timer State[2m > [22mshould expose sessionTime from useSessionTimer
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Timer State[2m > [22mshould expose totalTime from useSessionTimer
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Timer State[2m > [22mshould expose isActive from useSessionTimer
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Timer State[2m > [22mshould expose isPaused from useSessionTimer
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Timer State[2m > [22mshould expose isLockedOut from useSessionTimer
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Break Management State[2m > [22mshould expose isOnBreak from useBreakManagement
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Break Management State[2m > [22mshould expose isBreakMandatory from useBreakManagement
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Break Management State[2m > [22mshould expose breakHistory from useBreakManagement
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - PVQ Trigger State[2m > [22mshould expose showPVQModal from usePVQTrigger
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - PVQ Trigger State[2m > [22mshould expose currentPVQQuestion from usePVQTrigger
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - PVQ Trigger State[2m > [22mshould expose pvqSubmitting from usePVQTrigger
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Data State[2m > [22mshould expose currentSessionId from useSessionData
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Data State[2m > [22mshould expose lessonsAccessed from useSessionData
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Data State[2m > [22mshould expose sessionHistory from useSessionData
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Timer Methods[2m > [22mshould expose startTimer from useSessionTimer
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Timer Methods[2m > [22mshould expose pauseTimer from useSessionTimer
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Timer Methods[2m > [22mshould expose resumeTimer from useSessionTimer
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Timer Methods[2m > [22mshould expose stopTimer from useSessionTimer
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Break Methods[2m > [22mshould expose startBreak from useBreakManagement
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Break Methods[2m > [22mshould expose endBreak from useBreakManagement
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - PVQ Methods[2m > [22mshould expose triggerPVQ from usePVQTrigger
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - PVQ Methods[2m > [22mshould expose closePVQModal from usePVQTrigger
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - PVQ Methods[2m > [22mshould expose submitPVQAnswer from usePVQTrigger
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Data Methods[2m > [22mshould expose createSession from useSessionData
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Data Methods[2m > [22mshould expose recordLessonAccess from useSessionData
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mContext Value - Session Data Methods[2m > [22mshould expose closeSession from useSessionData
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mBackward Compatibility - Additional Methods[2m > [22mshould preserve helper method updateVideoProgress
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mBackward Compatibility - Additional Methods[2m > [22mshould preserve helper method trackLessonAccess
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mBackward Compatibility - Additional Methods[2m > [22mshould preserve helper method formatTime
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mBackward Compatibility - Additional Methods[2m > [22mshould preserve helper method getFormattedSessionTime
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mBackward Compatibility - Additional Methods[2m > [22mshould preserve helper method getRemainingDailyTime
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mNo Breaking Changes[2m > [22mshould not break App.jsx integration
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mNo Breaking Changes[2m > [22mshould not break CoursePlayerPage.jsx integration
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mSyntax and Structure[2m > [22mshould have no syntax errors
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mSyntax and Structure[2m > [22mshould be a valid React component
[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mSyntax and Structure[2m > [22mshould call all 4 custom hooks
[31m[1mTypeError[22m: jest.runOnlyPendingTimers is not a function[39m
[90m [2m‚ùØ[22m src/context/TimerContext.test.js:[2m11:10[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[3/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/context/TimerContext.test.js[2m > [22mTimerContext Integration[2m > [22mSyntax and Structure[2m > [22mshould have no syntax errors
[31m[1mAssertionError[22m: expected [Function] to not throw an error but 'SyntaxError: Unexpected token \'<\'' was thrown[39m

[32m- Expected:[39m 
undefined

[31m+ Received:[39m 
"SyntaxError: Unexpected token '<'"

[90m [2m‚ùØ[22m src/context/TimerContext.test.js:[2m434:14[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[4/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mHook Creation[2m > [22mshould be a function
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mHook Creation[2m > [22mshould be a valid React hook
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mDMV Compliance Constants[2m > [22mshould enforce 2-hour break requirement threshold
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mDMV Compliance Constants[2m > [22mshould enforce 10-minute minimum break duration
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mHook Exports[2m > [22mshould export named hook
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mHook Exports[2m > [22mshould have default export
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mInitial State[2m > [22mshould initialize with correct default state
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mRequired State Properties[2m > [22mshould have all required state properties
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mRequired Methods[2m > [22mshould have all required methods
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mRequired Methods[2m > [22mshould export methods as useCallback
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mRequired Getters[2m > [22mshould have all required getter properties
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mOptions Handling[2m > [22mshould accept sessionTime for break tracking
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mOptions Handling[2m > [22mshould accept onBreakRequired callback
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mOptions Handling[2m > [22mshould accept onBreakEnded callback
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak Tracking Logic[2m > [22mshould track break start time when break starts
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak Tracking Logic[2m > [22mshould maintain break history array
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak Tracking Logic[2m > [22mshould calculate current break duration
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak Tracking Logic[2m > [22mshould identify when break is due
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak Duration Validation[2m > [22mshould enforce minimum break duration of 10 minutes
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak Duration Validation[2m > [22mshould check if minimum break is met
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak State Management[2m > [22mshould toggle isOnBreak state when starting break
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak State Management[2m > [22mshould toggle isOnBreak state when ending break
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak State Management[2m > [22mshould set isBreakMandatory when break is required
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak History Tracking[2m > [22mshould record breaks in history array
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak History Tracking[2m > [22mshould include break duration in history
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mBreak History Tracking[2m > [22mshould include break timestamp in history
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mCallback Triggers[2m > [22mshould trigger onBreakRequired callback when break is due
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mCallback Triggers[2m > [22mshould trigger onBreakEnded callback when break ends
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mReturn Object Structure[2m > [22mshould return object with all state properties
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useState hook
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useCallback for methods
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useEffect for break tracking
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useRef for tracking
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mReact Hooks Usage[2m > [22mshould import hooks from react
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mCompliance with Step 1.3.2 Requirements[2m > [22mshould have all required state properties
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mCompliance with Step 1.3.2 Requirements[2m > [22mshould have all required methods
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mCompliance with Step 1.3.2 Requirements[2m > [22mshould have all required getters
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mNo Breaking Changes[2m > [22mshould not modify TimerContext
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mNo Breaking Changes[2m > [22mshould not break existing App.jsx integration
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mSyntax and Structure[2m > [22mshould have no syntax errors
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mSyntax and Structure[2m > [22mshould export hook as default export
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useBreakManagement.test.js[2m > [22museBreakManagement Hook[2m > [22mSyntax and Structure[2m > [22mshould also export as named export
[31m[1mTypeError[22m: jest.runOnlyPendingTimers is not a function[39m
[90m [2m‚ùØ[22m src/hooks/useBreakManagement.test.js:[2m13:10[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[5/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould call heartbeat function every 60 seconds
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould call onHeartbeatSuccess callback on successful heartbeat
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould call onLimitReached when daily limit is exceeded
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould not send heartbeat when disabled
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould not send heartbeat without required parameters
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould call onHeartbeatError callback on error
[31m[1mTypeError[22m: httpsCallable.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/hooks/useComplianceHeartbeat.test.js:[2m13:19[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[6/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould call heartbeat function every 60 seconds
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould call onHeartbeatSuccess callback on successful heartbeat
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould call onLimitReached when daily limit is exceeded
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould not send heartbeat when disabled
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould not send heartbeat without required parameters
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useComplianceHeartbeat.test.js[2m > [22museComplianceHeartbeat[2m > [22mshould call onHeartbeatError callback on error
[31m[1mTypeError[22m: jest.runOnlyPendingTimers is not a function[39m
[90m [2m‚ùØ[22m src/hooks/useComplianceHeartbeat.test.js:[2m18:10[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[7/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mHook Creation[2m > [22mshould be a function
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mHook Creation[2m > [22mshould be a valid React hook
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mDMV Compliance Constants[2m > [22mshould enforce 30-minute PVQ trigger interval
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mDMV Compliance Constants[2m > [22mshould enforce random offset minimum of 5 minutes
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mDMV Compliance Constants[2m > [22mshould enforce random offset maximum of 10 minutes
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mHook Exports[2m > [22mshould export named hook
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mHook Exports[2m > [22mshould have default export
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mInitial State[2m > [22mshould initialize with correct default state
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mRequired State Properties[2m > [22mshould have all required state properties
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mRequired Methods[2m > [22mshould have all required methods
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mRequired Methods[2m > [22mshould export methods as useCallback
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mPVQ Triggering Logic[2m > [22mshould calculate next PVQ trigger time with random offset
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mPVQ Triggering Logic[2m > [22mshould track PVQ start time
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mPVQ Triggering Logic[2m > [22mshould track when PVQ is submitted
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mPVQ Triggering Logic[2m > [22mshould store current PVQ question
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mOptions Handling[2m > [22mshould accept sessionTime for PVQ trigger check
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mOptions Handling[2m > [22mshould accept getRandomQuestion callback
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mOptions Handling[2m > [22mshould accept onPVQTriggered callback
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mOptions Handling[2m > [22mshould accept onPVQSubmitted callback
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mOptions Handling[2m > [22mshould handle missing options gracefully
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mModal State Management[2m > [22mshould toggle showPVQModal state
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mModal State Management[2m > [22mshould set PVQ question when triggered
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mModal State Management[2m > [22mshould clear PVQ question when closed
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mSubmission State[2m > [22mshould toggle pvqSubmitting state
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mCallback Triggers[2m > [22mshould trigger onPVQTriggered when PVQ modal opens
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mCallback Triggers[2m > [22mshould trigger onPVQSubmitted when answer is submitted
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mRandom Trigger Intervals[2m > [22mshould calculate offset within specified range
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mRandom Trigger Intervals[2m > [22mshould add offset to base trigger interval
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mReturn Object Structure[2m > [22mshould return object with all state properties
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useState hook
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useCallback for methods
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useEffect for PVQ trigger checking
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useRef for tracking
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mReact Hooks Usage[2m > [22mshould import hooks from react
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mCompliance with Step 1.3.3 Requirements[2m > [22mshould have all required state properties
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mCompliance with Step 1.3.3 Requirements[2m > [22mshould have all required methods
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mCompliance with Step 1.3.3 Requirements[2m > [22mshould implement random trigger intervals
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mNo Breaking Changes[2m > [22mshould not modify TimerContext
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mNo Breaking Changes[2m > [22mshould not break existing App.jsx integration
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mSyntax and Structure[2m > [22mshould have no syntax errors
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mSyntax and Structure[2m > [22mshould export hook as default export
[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mSyntax and Structure[2m > [22mshould also export as named export
[31m[1mTypeError[22m: jest.runOnlyPendingTimers is not a function[39m
[90m [2m‚ùØ[22m src/hooks/usePVQTrigger.test.js:[2m14:10[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[8/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mPVQ Triggering Logic[2m > [22mshould calculate next PVQ trigger time with random offset
[31m[1mAssertionError[22m: expected 'import { useState, useCallback, useEf‚Ä¶' to contain '30 * 60'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 30 * 60[39m
[31m+ import { useState, useCallback, useEffect, useRef } from 'react';[39m
[31m+[39m
[31m+ const PVQ_TRIGGER_INTERVAL = 2 * 60 * 60;[39m
[31m+ const PVQ_RANDOM_OFFSET_MIN = 0;[39m
[31m+ const PVQ_RANDOM_OFFSET_MAX = 2 * 60;[39m
[31m+[39m
[31m+ export const usePVQTrigger = (options = {}) => {[39m
[31m+   const {[39m
[31m+     sessionTime = 0,[39m
[31m+     getRandomQuestion = null,[39m
[31m+     onPVQTriggered = null,[39m
[31m+     onPVQSubmitted = null[39m
[31m+   } = options;[39m
[31m+[39m
[31m+   const [showPVQModal, setShowPVQModal] = useState(false);[39m
[31m+   const [currentPVQQuestion, setCurrentPVQQuestion] = useState(null);[39m
[31m+   const [pvqStartTime, setPVQStartTime] = useState(null);[39m
[31m+   const [nextPVQTriggerTime, setNextPVQTriggerTime] = useState(calculateNextTriggerTime());[39m
[31m+   const [pvqSubmitting, setPVQSubmitting] = useState(false);[39m
[31m+[39m
[31m+   const pvqTriggeredRef = useRef(false);[39m
[31m+[39m
[31m+   function calculateNextTriggerTime() {[39m
[31m+     const randomOffset = Math.floor([39m
[31m+       Math.random() * (PVQ_RANDOM_OFFSET_MAX - PVQ_RANDOM_OFFSET_MIN) + PVQ_RANDOM_OFFSET_MIN[39m
[31m+     );[39m
[31m+     return PVQ_TRIGGER_INTERVAL + randomOffset;[39m
[31m+   }[39m
[31m+[39m
[31m+   const triggerPVQ = useCallback(async () => {[39m
[31m+     if (!showPVQModal && getRandomQuestion) {[39m
[31m+       try {[39m
[31m+         setPVQSubmitting(false);[39m
[31m+         const question = await getRandomQuestion();[39m
[31m+         if (question) {[39m
[31m+           setCurrentPVQQuestion(question);[39m
[31m+           setShowPVQModal(true);[39m
[31m+           setPVQStartTime(Date.now());[39m
[31m+[39m
[31m+           if (onPVQTriggered) {[39m
[31m+             onPVQTriggered(question);[39m
[31m+           }[39m
[31m+         }[39m
[31m+       } catch (error) {[39m
[31m+         console.error('Error triggering PVQ:', error);[39m
[31m+       }[39m
[31m+     }[39m
[31m+   }, [showPVQModal, getRandomQuestion, onPVQTriggered]);[39m
[31m+[39m
[31m+   const closePVQModal = useCallback(() => {[39m
[31m+     setShowPVQModal(false);[39m
[31m+     setCurrentPVQQuestion(null);[39m
[31m+     setPVQStartTime(null);[39m
[31m+     setPVQSubmitting(false);[39m
[31m+     setNextPVQTriggerTime(calculateNextTriggerTime());[39m
[31m+     pvqTriggeredRef.current = false;[39m
[31m+   }, []);[39m
[31m+[39m
[31m+   const submitPVQAnswer = useCallback(async (answer) => {[39m
[31m+     if (!currentPVQQuestion) return;[39m
[31m+[39m
[31m+     setPVQSubmitting(true);[39m
[31m+[39m
[31m+     try {[39m
[31m+       const timeToAnswer = pvqStartTime ? Date.now() - pvqStartTime : 0;[39m
[31m+[39m
[31m+       if (onPVQSubmitted) {[39m
[31m+         await onPVQSubmitted({[39m
[31m+           question: currentPVQQuestion,[39m
[31m+           answer,[39m
[31m+           timeToAnswer[39m
[31m+         });[39m
[31m+       }[39m
[31m+[39m
[31m+       setShowPVQModal(false);[39m
[31m+       setCurrentPVQQuestion(null);[39m
[31m+       setPVQStartTime(null);[39m
[31m+       setPVQSubmitting(false);[39m
[31m+       setNextPVQTriggerTime(calculateNextTriggerTime());[39m
[31m+       pvqTriggeredRef.current = false;[39m
[31m+     } catch (error) {[39m
[31m+       console.error('Error submitting PVQ answer:', error);[39m
[31m+       setPVQSubmitting(false);[39m
[31m+     }[39m
[31m+   }, [currentPVQQuestion, pvqStartTime, onPVQSubmitted]);[39m
[31m+[39m
[31m+   useEffect(() => {[39m
[31m+     if ([39m
[31m+       sessionTime >= nextPVQTriggerTime &&[39m
[31m+       !showPVQModal &&[39m
[31m+       !pvqTriggeredRef.current[39m
[31m+     ) {[39m
[31m+       pvqTriggeredRef.current = true;[39m
[31m+       triggerPVQ();[39m
[31m+     }[39m
[31m+   }, [sessionTime, nextPVQTriggerTime, showPVQModal, triggerPVQ]);[39m
[31m+[39m
[31m+   return {[39m
[31m+     showPVQModal,[39m
[31m+     currentPVQQuestion,[39m
[31m+     pvqStartTime,[39m
[31m+     nextPVQTriggerTime,[39m
[31m+     pvqSubmitting,[39m
[31m+     triggerPVQ,[39m
[31m+     closePVQModal,[39m
[31m+     submitPVQAnswer[39m
[31m+   };[39m
[31m+ };[39m
[31m+[39m
[31m+ export default usePVQTrigger;[39m
[31m+[39m

[90m [2m‚ùØ[22m src/hooks/usePVQTrigger.test.js:[2m132:23[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[9/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/hooks/usePVQTrigger.test.js[2m > [22musePVQTrigger Hook[2m > [22mRandom Trigger Intervals[2m > [22mshould calculate offset within specified range
[31m[1mAssertionError[22m: expected 'import { useState, useCallback, useEf‚Ä¶' to contain '5 * 60'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 5 * 60[39m
[31m+ import { useState, useCallback, useEffect, useRef } from 'react';[39m
[31m+[39m
[31m+ const PVQ_TRIGGER_INTERVAL = 2 * 60 * 60;[39m
[31m+ const PVQ_RANDOM_OFFSET_MIN = 0;[39m
[31m+ const PVQ_RANDOM_OFFSET_MAX = 2 * 60;[39m
[31m+[39m
[31m+ export const usePVQTrigger = (options = {}) => {[39m
[31m+   const {[39m
[31m+     sessionTime = 0,[39m
[31m+     getRandomQuestion = null,[39m
[31m+     onPVQTriggered = null,[39m
[31m+     onPVQSubmitted = null[39m
[31m+   } = options;[39m
[31m+[39m
[31m+   const [showPVQModal, setShowPVQModal] = useState(false);[39m
[31m+   const [currentPVQQuestion, setCurrentPVQQuestion] = useState(null);[39m
[31m+   const [pvqStartTime, setPVQStartTime] = useState(null);[39m
[31m+   const [nextPVQTriggerTime, setNextPVQTriggerTime] = useState(calculateNextTriggerTime());[39m
[31m+   const [pvqSubmitting, setPVQSubmitting] = useState(false);[39m
[31m+[39m
[31m+   const pvqTriggeredRef = useRef(false);[39m
[31m+[39m
[31m+   function calculateNextTriggerTime() {[39m
[31m+     const randomOffset = Math.floor([39m
[31m+       Math.random() * (PVQ_RANDOM_OFFSET_MAX - PVQ_RANDOM_OFFSET_MIN) + PVQ_RANDOM_OFFSET_MIN[39m
[31m+     );[39m
[31m+     return PVQ_TRIGGER_INTERVAL + randomOffset;[39m
[31m+   }[39m
[31m+[39m
[31m+   const triggerPVQ = useCallback(async () => {[39m
[31m+     if (!showPVQModal && getRandomQuestion) {[39m
[31m+       try {[39m
[31m+         setPVQSubmitting(false);[39m
[31m+         const question = await getRandomQuestion();[39m
[31m+         if (question) {[39m
[31m+           setCurrentPVQQuestion(question);[39m
[31m+           setShowPVQModal(true);[39m
[31m+           setPVQStartTime(Date.now());[39m
[31m+[39m
[31m+           if (onPVQTriggered) {[39m
[31m+             onPVQTriggered(question);[39m
[31m+           }[39m
[31m+         }[39m
[31m+       } catch (error) {[39m
[31m+         console.error('Error triggering PVQ:', error);[39m
[31m+       }[39m
[31m+     }[39m
[31m+   }, [showPVQModal, getRandomQuestion, onPVQTriggered]);[39m
[31m+[39m
[31m+   const closePVQModal = useCallback(() => {[39m
[31m+     setShowPVQModal(false);[39m
[31m+     setCurrentPVQQuestion(null);[39m
[31m+     setPVQStartTime(null);[39m
[31m+     setPVQSubmitting(false);[39m
[31m+     setNextPVQTriggerTime(calculateNextTriggerTime());[39m
[31m+     pvqTriggeredRef.current = false;[39m
[31m+   }, []);[39m
[31m+[39m
[31m+   const submitPVQAnswer = useCallback(async (answer) => {[39m
[31m+     if (!currentPVQQuestion) return;[39m
[31m+[39m
[31m+     setPVQSubmitting(true);[39m
[31m+[39m
[31m+     try {[39m
[31m+       const timeToAnswer = pvqStartTime ? Date.now() - pvqStartTime : 0;[39m
[31m+[39m
[31m+       if (onPVQSubmitted) {[39m
[31m+         await onPVQSubmitted({[39m
[31m+           question: currentPVQQuestion,[39m
[31m+           answer,[39m
[31m+           timeToAnswer[39m
[31m+         });[39m
[31m+       }[39m
[31m+[39m
[31m+       setShowPVQModal(false);[39m
[31m+       setCurrentPVQQuestion(null);[39m
[31m+       setPVQStartTime(null);[39m
[31m+       setPVQSubmitting(false);[39m
[31m+       setNextPVQTriggerTime(calculateNextTriggerTime());[39m
[31m+       pvqTriggeredRef.current = false;[39m
[31m+     } catch (error) {[39m
[31m+       console.error('Error submitting PVQ answer:', error);[39m
[31m+       setPVQSubmitting(false);[39m
[31m+     }[39m
[31m+   }, [currentPVQQuestion, pvqStartTime, onPVQSubmitted]);[39m
[31m+[39m
[31m+   useEffect(() => {[39m
[31m+     if ([39m
[31m+       sessionTime >= nextPVQTriggerTime &&[39m
[31m+       !showPVQModal &&[39m
[31m+       !pvqTriggeredRef.current[39m
[31m+     ) {[39m
[31m+       pvqTriggeredRef.current = true;[39m
[31m+       triggerPVQ();[39m
[31m+     }[39m
[31m+   }, [sessionTime, nextPVQTriggerTime, showPVQModal, triggerPVQ]);[39m
[31m+[39m
[31m+   return {[39m
[31m+     showPVQModal,[39m
[31m+     currentPVQQuestion,[39m
[31m+     pvqStartTime,[39m
[31m+     nextPVQTriggerTime,[39m
[31m+     pvqSubmitting,[39m
[31m+     triggerPVQ,[39m
[31m+     closePVQModal,[39m
[31m+     submitPVQAnswer[39m
[31m+   };[39m
[31m+ };[39m
[31m+[39m
[31m+ export default usePVQTrigger;[39m
[31m+[39m

[90m [2m‚ùØ[22m src/hooks/usePVQTrigger.test.js:[2m269:23[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[10/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mHook Creation[2m > [22mshould be a function
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mHook Creation[2m > [22mshould be a valid React hook
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mHook Exports[2m > [22mshould export named hook
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mHook Exports[2m > [22mshould have default export
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mInitial State[2m > [22mshould initialize with correct default state
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mRequired State Properties[2m > [22mshould have all required state properties
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mRequired Methods[2m > [22mshould have all required methods
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mRequired Methods[2m > [22mshould export methods as useCallback
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mRequired Getters[2m > [22mshould have all required getter properties
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mOptions Handling[2m > [22mshould accept optional callbacks in options
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mOptions Handling[2m > [22mshould accept onSessionCreated callback
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mOptions Handling[2m > [22mshould accept onLessonAccessed callback
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mOptions Handling[2m > [22mshould accept onSessionClosed callback
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Creation[2m > [22mshould create session with ID
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Creation[2m > [22mshould initialize lessons accessed array for new session
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Creation[2m > [22mshould create current session object with metadata
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Creation[2m > [22mshould trigger onSessionCreated callback
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mLesson Access Recording[2m > [22mshould add lesson ID to lessonsAccessed array
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mLesson Access Recording[2m > [22mshould prevent duplicate lesson entries
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mLesson Access Recording[2m > [22mshould trigger onLessonAccessed callback
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Closure[2m > [22mshould close current session
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Closure[2m > [22mshould move closed session to session history
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Closure[2m > [22mshould clear lessons accessed array on close
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Closure[2m > [22mshould set end time for closed session
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Closure[2m > [22mshould trigger onSessionClosed callback
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Data Structure[2m > [22mshould track session ID
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Data Structure[2m > [22mshould track lesson IDs accessed
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Data Structure[2m > [22mshould track start time
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Data Structure[2m > [22mshould track end time when session closes
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mLesson Count Getter[2m > [22mshould calculate number of lessons accessed
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mLesson Count Getter[2m > [22mshould use lessonsAccessed array length
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Count Getter[2m > [22mshould calculate number of sessions in history
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSession Count Getter[2m > [22mshould use sessionHistory array length
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mReturn Object Structure[2m > [22mshould return object with all state properties
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useState hook
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mReact Hooks Usage[2m > [22mshould use useCallback for methods
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mReact Hooks Usage[2m > [22mshould import hooks from react
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mCompliance with Step 1.3.4 Requirements[2m > [22mshould have all required state properties
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mCompliance with Step 1.3.4 Requirements[2m > [22mshould have all required methods
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mCompliance with Step 1.3.4 Requirements[2m > [22mshould have all required getters
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mNo Breaking Changes[2m > [22mshould not modify TimerContext
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mNo Breaking Changes[2m > [22mshould not break existing App.jsx integration
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSyntax and Structure[2m > [22mshould have no syntax errors
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSyntax and Structure[2m > [22mshould export hook as default export
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionData.test.js[2m > [22museSessionData Hook[2m > [22mSyntax and Structure[2m > [22mshould also export as named export
[31m[1mTypeError[22m: jest.runOnlyPendingTimers is not a function[39m
[90m [2m‚ùØ[22m src/hooks/useSessionData.test.js:[2m10:10[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[11/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mHook Creation[2m > [22mshould be a function
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mHook Creation[2m > [22mshould be a valid React hook
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mDMV Compliance Constants[2m > [22mshould enforce 4-hour daily maximum
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mDMV Compliance Constants[2m > [22mshould enforce 2-hour break requirement
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mHook Methods[2m > [22mshould export named hook
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mHook Methods[2m > [22mshould have default export
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mReturn Object Structure[2m > [22mshould return object with expected state properties
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mConstants Preservation[2m > [22mshould preserve MAX_DAILY_HOURS for DMV compliance
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mConstants Preservation[2m > [22mshould preserve BREAK_REQUIRED_AFTER for DMV compliance
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mHook Methods Available[2m > [22mshould expose required method signatures
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mHook Methods Available[2m > [22mshould return state properties
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mHook Methods Available[2m > [22mshould return getter properties
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mNo Breaking Changes[2m > [22mshould not modify TimerContext
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mNo Breaking Changes[2m > [22mshould not break existing App.jsx integration
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mOptions Handling[2m > [22mshould accept optional callbacks
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mOptions Handling[2m > [22mshould handle missing options gracefully
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mCompliance with Step 1.3.1 Requirements[2m > [22mshould have all required state properties
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mCompliance with Step 1.3.1 Requirements[2m > [22mshould have all required methods
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mCompliance with Step 1.3.1 Requirements[2m > [22mshould have all required getters
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mCompliance with Step 1.3.1 Requirements[2m > [22mshould check daily lockout on demand
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mCompliance with Step 1.3.1 Requirements[2m > [22mshould increment timer every 1 second
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mExport Validation[2m > [22mshould export hook as default export
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mExport Validation[2m > [22mshould also export as named export
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mSyntax and Structure[2m > [22mshould have no syntax errors
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mSyntax and Structure[2m > [22mshould use React hooks correctly
[31m[1m[7m FAIL [27m[22m[39m src/hooks/useSessionTimer.test.js[2m > [22museSessionTimer Hook[2m > [22mSyntax and Structure[2m > [22mshould import React hooks from react
[31m[1mTypeError[22m: jest.runOnlyPendingTimers is not a function[39m
[90m [2m‚ùØ[22m src/hooks/useSessionTimer.test.js:[2m13:10[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[12/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould call httpsCallable with createUser function name
[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould pass email, temporary password, display name, and role to Cloud Function
[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould return user data on successful creation
[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould use email prefix as displayName when empty
[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould handle Cloud Function errors
[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould handle authentication errors
[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould handle permission errors for non-super-admins
[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould automatically set role to DMV_ADMIN
[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js[2m > [22mUser Management - createUser Function[2m > [22mshould handle network errors
[31m[1mTypeError[22m: httpsCallable.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.createUserFunction.test.js:[2m11:19[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[13/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetAllUsers[2m > [22mshould fetch and return all users
[31m[1mTypeError[22m: getDocs.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m37:15[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[14/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetAllUsers[2m > [22mshould handle empty user list
[31m[1mTypeError[22m: getDocs.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m46:15[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[15/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetAllUsers[2m > [22mshould throw error on fetch failure
[31m[1mTypeError[22m: getDocs.mockRejectedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m55:15[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[16/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserById[2m > [22mshould fetch user by ID
[31m[1mTypeError[22m: getDoc.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m72:14[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[17/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserById[2m > [22mshould return null if user does not exist
[31m[1mTypeError[22m: getDoc.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m85:14[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[18/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserById[2m > [22mshould throw error on fetch failure
[31m[1mTypeError[22m: getDoc.mockRejectedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m94:14[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[19/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mupdateUserRole[2m > [22mshould update user role and log activity
[31m[1mTypeError[22m: getDoc.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m112:14[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[20/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mupdateUserRole[2m > [22mshould throw error if user not found
[31m[1mTypeError[22m: getDoc.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m144:14[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[21/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mlogActivity[2m > [22mshould log activity with timestamp
[31m[1mTypeError[22m: addDoc.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m160:14[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[22/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mlogActivity[2m > [22mshould throw error on log failure
[31m[1mTypeError[22m: addDoc.mockRejectedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m174:14[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[23/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetActivityLogs[2m > [22mshould fetch all activity logs
[31m[1mTypeError[22m: getDocs.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m196:15[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[24/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetActivityLogs[2m > [22mshould filter logs by targetUserId
[31m[1mTypeError[22m: getDocs.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m207:15[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[25/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetActivityLogs[2m > [22mshould filter logs by type
[31m[1mTypeError[22m: getDocs.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m216:15[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[26/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetActivityLogs[2m > [22mshould throw error on fetch failure
[31m[1mTypeError[22m: getDocs.mockRejectedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m225:15[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[27/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserActivityHistory[2m > [22mshould fetch user activity history
[31m[1mTypeError[22m: getDocs.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m246:15[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[28/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserActivityHistory[2m > [22mshould throw error on fetch failure
[31m[1mTypeError[22m: getDocs.mockRejectedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m256:15[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[29/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetAdminActivityHistory[2m > [22mshould fetch admin activity history
[31m[1mTypeError[22m: getDocs.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m278:15[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[30/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetAdminActivityHistory[2m > [22mshould throw error on fetch failure
[31m[1mTypeError[22m: getDocs.mockRejectedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m287:15[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[31/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mdeleteUser[2m > [22mshould soft delete user and log activity
[31m[1mTypeError[22m: updateDoc.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m300:17[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[32/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mdeleteUser[2m > [22mshould throw error on delete failure
[31m[1mTypeError[22m: updateDoc.mockRejectedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m322:17[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[33/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mrestoreUser[2m > [22mshould restore deleted user and log activity
[31m[1mTypeError[22m: updateDoc.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m335:17[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[34/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mrestoreUser[2m > [22mshould throw error on restore failure
[31m[1mTypeError[22m: updateDoc.mockRejectedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m357:17[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[35/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserStats[2m > [22mshould calculate user statistics by role
[31m[1mTypeError[22m: getDocs.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m381:15[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[36/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserStats[2m > [22mshould count deleted users
[31m[1mTypeError[22m: getDocs.mockResolvedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m405:15[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[37/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/admin/__tests__/userManagementServices.test.js[2m > [22mUser Management Services[2m > [22mgetUserStats[2m > [22mshould throw error on fetch failure
[31m[1mTypeError[22m: getDocs.mockRejectedValue is not a function[39m
[90m [2m‚ùØ[22m src/api/admin/__tests__/userManagementServices.test.js:[2m415:15[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[38/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mset()[2m > [22mshould store a value in cache
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mset()[2m > [22mshould overwrite existing key
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mset()[2m > [22mshould store different types of values
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mset()[2m > [22mshould store null values
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mset()[2m > [22mshould handle numeric keys by converting to string
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mget()[2m > [22mshould retrieve cached value
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mget()[2m > [22mshould return null if key does not exist
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mget()[2m > [22mshould return null if entry has expired
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mget()[2m > [22mshould return value before TTL expires
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mget()[2m > [22mshould return value if no TTL provided
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mget()[2m > [22mshould automatically clean up expired entries on get()
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22minvalidate()[2m > [22mshould remove a single entry from cache
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22minvalidate()[2m > [22mshould handle invalidating non-existent key gracefully
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22minvalidate()[2m > [22mshould remove TTL timeout when invalidating
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22minvalidate()[2m > [22mshould not affect other cache entries
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mclear()[2m > [22mshould remove all entries from cache
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mclear()[2m > [22mshould clear all TTL timeouts
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mclear()[2m > [22mshould allow adding new entries after clearing
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mTTL (time-to-live)[2m > [22mshould use default TTL if provided
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mTTL (time-to-live)[2m > [22mshould honor different TTLs for different entries
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mTTL (time-to-live)[2m > [22mshould not expire entries without TTL
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mTTL (time-to-live)[2m > [22mshould expire exactly at TTL boundary
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22medge cases[2m > [22mshould handle cache hits and misses in sequence
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22medge cases[2m > [22mshould handle rapid set and get operations
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22medge cases[2m > [22mshould handle special characters in keys
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22medge cases[2m > [22mshould handle large objects
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22medge cases[2m > [22mshould not interfere with prototype chain
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mintegration scenarios[2m > [22mshould handle cache invalidation and re-population
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mintegration scenarios[2m > [22mshould handle mixed TTL and non-TTL entries
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mintegration scenarios[2m > [22mshould handle multiple clears
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mintegration scenarios[2m > [22mshould handle invalidate after expiration
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/CacheService.test.js[2m > [22mCacheService[2m > [22mintegration scenarios[2m > [22mshould maintain cache between get operations
[31m[1mTypeError[22m: jest.runOnlyPendingTimers is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/CacheService.test.js:[2m11:10[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[39/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mpaginate[2m > [22mshould retrieve first page with pagination metadata
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m51:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[40/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mpaginate[2m > [22mshould apply filters when provided
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m79:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[41/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mpaginate[2m > [22mshould apply ordering when provided
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m99:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[42/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mpaginate[2m > [22mshould indicate hasNextPage = true when total > pageSize
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m118:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[43/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mpaginate[2m > [22mshould throw ApiError on query failure
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m137:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[44/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetNextPage[2m > [22mshould retrieve next page using cursor
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m162:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[45/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetNextPage[2m > [22mshould throw error if lastVisible is null
[31m[1mAssertionError[22m: expected Error: Invalid pagination cursor { ‚Ä¶(3) } to be an instance of ApiError[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m185:23[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[46/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetNextPage[2m > [22mshould indicate hasNextPage = false when fewer docs than pageSize returned
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m196:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[47/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetNextPage[2m > [22mshould throw ApiError on query failure
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m213:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[48/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetPageAtIndex[2m > [22mshould retrieve specific page by number
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m239:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[49/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetPageAtIndex[2m > [22mshould throw error if pageNumber < 1
[31m[1mAssertionError[22m: expected Error: Page number must be greater than 0 { ‚Ä¶(3) } to be an instance of ApiError[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m266:23[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[50/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetPageAtIndex[2m > [22mshould calculate correct skip count for pagination
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m272:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[51/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetPageAtIndex[2m > [22mshould have hasPreviousPage = false on first page
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m294:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[52/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetPageAtIndex[2m > [22mshould have hasNextPage = false on last page
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m313:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[53/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetPageAtIndex[2m > [22mshould throw ApiError on query failure
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m332:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[54/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetCollectionCount[2m > [22mshould return collection document count
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m351:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[55/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetCollectionCount[2m > [22mshould apply filters when provided
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m364:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[56/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetCollectionCount[2m > [22mshould throw ApiError on query failure
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m380:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[57/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mgetCollectionCount[2m > [22mshould return 0 for empty collection
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m397:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[58/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mIntegration scenarios[2m > [22mshould handle multiple filters correctly
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m412:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[59/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/QueryHelper.test.js[2m > [22mQueryHelper[2m > [22mIntegration scenarios[2m > [22mshould handle pagination chain: first -> next -> next
[31m[1mTypeError[22m: firebaseFirestore.collection.mockReturnValue is not a function[39m
[90m [2m‚ùØ[22m src/api/base/__tests__/QueryHelper.test.js:[2m438:36[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[60/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mexecute[2m > [22mshould fail immediately for non-retryable errors
[31m[1mAssertionError[22m: expected 'UNAUTHENTICATED' to contain 'Invalid credentials'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Invalid credentials[39m
[31m+ UNAUTHENTICATED[39m

[90m [2m‚ùØ[22m src/api/base/__tests__/RetryHandler.test.js:[2m182:31[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[61/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mexecute[2m > [22mshould throw after max attempts exhausted
[31m[1mAssertionError[22m: expected 'RETRY_EXHAUSTED' to contain 'failed after 3 attempts'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- failed after 3 attempts[39m
[31m+ RETRY_EXHAUSTED[39m

[90m [2m‚ùØ[22m src/api/base/__tests__/RetryHandler.test.js:[2m198:31[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[62/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mexecute[2m > [22mshould throw ApiError with context information
[31m[1mAssertionError[22m: expected 'RETRY_EXHAUSTED' to contain 'failed after 3 attempts'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- failed after 3 attempts[39m
[31m+ RETRY_EXHAUSTED[39m

[90m [2m‚ùØ[22m src/api/base/__tests__/RetryHandler.test.js:[2m211:31[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[63/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mexecute[2m > [22mshould validate operation parameter
[31m[1mAssertionError[22m: expected 'INVALID_OPERATION' to contain 'must be a function'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- must be a function[39m
[31m+ INVALID_OPERATION[39m

[90m [2m‚ùØ[22m src/api/base/__tests__/RetryHandler.test.js:[2m221:31[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[64/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mexecute[2m > [22mshould handle errors with message property
[31m[1mAssertionError[22m: expected 'RETRY_EXHAUSTED' to contain 'failed after 3 attempts'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- failed after 3 attempts[39m
[31m+ RETRY_EXHAUSTED[39m

[90m [2m‚ùØ[22m src/api/base/__tests__/RetryHandler.test.js:[2m278:37[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[65/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mexecute[2m > [22mshould log context in thrown error
[31m[1mAssertionError[22m: expected 'RETRY_EXHAUSTED' to contain 'myOperation'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- myOperation[39m
[31m+ RETRY_EXHAUSTED[39m

[90m [2m‚ùØ[22m src/api/base/__tests__/RetryHandler.test.js:[2m294:37[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[66/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mretryAsync convenience function[2m > [22mshould throw after max attempts
[31m[1mAssertionError[22m: expected 'RETRY_EXHAUSTED' to contain 'failed after'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- failed after[39m
[31m+ RETRY_EXHAUSTED[39m

[90m [2m‚ùØ[22m src/api/base/__tests__/RetryHandler.test.js:[2m324:31[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[67/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mcreateRetryHandler factory[2m > [22mshould work with custom handler
[31m[1mAssertionError[22m: expected 'RETRY_EXHAUSTED' to contain 'failed after 2 attempts'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- failed after 2 attempts[39m
[31m+ RETRY_EXHAUSTED[39m

[90m [2m‚ùØ[22m src/api/base/__tests__/RetryHandler.test.js:[2m351:31[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[68/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/RetryHandler.test.js[2m > [22mRetryHandler[2m > [22mreal-world scenarios[2m > [22mshould fail fast on permission error
[31m[1mAssertionError[22m: expected 'PERMISSION_DENIED' to contain 'Access denied'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Access denied[39m
[31m+ PERMISSION_DENIED[39m

[90m [2m‚ùØ[22m src/api/base/__tests__/RetryHandler.test.js:[2m387:31[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[69/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mConstructor[2m > [22mshould set serviceName
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mConstructor[2m > [22mshould expose validators as this.validate
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetCurrentUser[2m > [22mshould return current user if authenticated
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetCurrentUser[2m > [22mshould throw ApiError if not authenticated
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetCurrentUser[2m > [22mshould throw error with AUTH_ERROR code
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetCurrentUserId[2m > [22mshould return user UID when authenticated
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetCurrentUserId[2m > [22mshould throw error when not authenticated
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetDoc[2m > [22mshould retrieve and format document
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetDoc[2m > [22mshould throw NOT_FOUND error if document missing
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetDoc[2m > [22mshould catch and map Firebase errors
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22msetDoc[2m > [22mshould set document data
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22msetDoc[2m > [22mshould handle Firebase errors
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mupdateDoc[2m > [22mshould update document
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mupdateDoc[2m > [22mshould validate updates before writing
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mdeleteDoc[2m > [22mshould delete document
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mdeleteDoc[2m > [22mshould handle Firebase errors
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mbatch[2m > [22mshould return batch instance
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mbatch[2m > [22mshould execute multiple operations
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mlog[2m > [22mshould use LoggingService for logging
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mlogError[2m > [22mshould log errors with service context
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mlogError[2m > [22mshould handle errors without code
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetCollection[2m > [22mshould return formatted documents
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mgetCollection[2m > [22mshould apply filters correctly
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mError handling[2m > [22mshould throw ApiError for all operations
[31m[1m[7m FAIL [27m[22m[39m src/api/base/__tests__/ServiceBase.test.js[2m > [22mServiceBase[2m > [22mError handling[2m > [22mshould not double-wrap ApiErrors
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mupdateEnrollmentAfterPayment - Atomic Operations[2m > [22mshould validate userId before atomic operation
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mupdateEnrollmentAfterPayment - Atomic Operations[2m > [22mshould validate courseId before atomic operation
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mupdateEnrollmentAfterPayment - Atomic Operations[2m > [22mshould throw error if enrollment not found
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mupdateEnrollmentAfterPayment - Atomic Operations[2m > [22mshould use atomic operations with batch updates
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mupdateEnrollmentAfterPayment - Atomic Operations[2m > [22mshould handle negative amounts (decrement)
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mupdateEnrollmentAfterPayment - Atomic Operations[2m > [22mshould set correct status when payment completed
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mpayRemainingBalance - Atomic Operations[2m > [22mshould validate payment amount
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mpayRemainingBalance - Atomic Operations[2m > [22mshould throw error if enrollment not found
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mpayRemainingBalance - Atomic Operations[2m > [22mshould use atomic batch operations
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mpayRemainingBalance - Atomic Operations[2m > [22mshould handle remaining balance correctly
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mAtomic Operations - Consistency[2m > [22mshould not lose updates with concurrent operations
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mAtomic Operations - Consistency[2m > [22mshould handle partial payment scenarios
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mError Handling with Atomic Operations[2m > [22mshould not commit batch on validation error
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mError Handling with Atomic Operations[2m > [22mshould handle enrollment not found without batch commit
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mReturn Values After Atomic Update[2m > [22mshould return correct values after successful atomic update
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.concurrent.test.js[2m > [22menrollmentServices - Concurrent Operations (Atomic)[2m > [22mReturn Values After Atomic Update[2m > [22mshould return correct payment status values
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'VITE_FIREBASE_API_KEY')[39m
[90m [2m‚ùØ[22m src/config/firebase.js:[2m9:27[22m[39m
[90m [2m‚ùØ[22m TracingChannel.traceSync node:diagnostics_channel:[2m322:14[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[70/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mInput Validation[2m > [22mshould throw ValidationError for invalid userId
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mInput Validation[2m > [22mshould throw ValidationError for invalid courseId
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mInput Validation[2m > [22mshould throw ValidationError for non-string userEmail
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mDuplicate Detection[2m > [22mshould return existing enrollment if already enrolled
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mEnrollment Creation[2m > [22mshould create enrollment with correct data for regular user
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mEnrollment Creation[2m > [22mshould create admin enrollment with correct status
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mEnrollment Creation[2m > [22mshould return created enrollment with id
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mEnrollment Creation[2m > [22mshould include required timestamp and enrollment fields
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mEnrollment Creation[2m > [22mshould call correct Firestore path for document
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mError Handling[2m > [22mshould throw EnrollmentError for invalid courseId pricing
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mError Handling[2m > [22mshould rethrow caught errors
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mAdmin Email Detection[2m > [22mshould recognize admin email (case insensitive)
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js[2m > [22menrollmentServices.createEnrollment() - Refactored with utilities[2m > [22mAdmin Email Detection[2m > [22mshould not recognize non-admin email
[31m[1mTypeError[22m: default.validate.validateUserId.mockImplementation is not a function[39m
[90m [2m‚ùØ[22m src/api/enrollment/__tests__/enrollmentServices.refactor.test.js:[2m25:48[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[71/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mInput Validation[2m > [22mshould throw ValidationError for invalid userId
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mInput Validation[2m > [22mshould throw ValidationError for invalid courseId
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mReset Logic[2m > [22mshould reset single enrollment to PENDING_PAYMENT status
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mReset Logic[2m > [22mshould include updatedAt timestamp
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mReset Logic[2m > [22mshould call updateDoc with correct path and data
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mReset Logic[2m > [22mshould clear payment info (amountPaid to 0)
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mReset Logic[2m > [22mshould set access status to LOCKED
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mReset Logic[2m > [22mshould log successful reset
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mError Handling[2m > [22mshould handle updateDoc errors gracefully
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mError Handling[2m > [22mshould rethrow errors after logging
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mData Integrity[2m > [22mshould reset multiple enrollments independently
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mData Integrity[2m > [22mshould not modify other user data
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetEnrollmentToPending()[2m > [22mRace Conditions[2m > [22mshould handle concurrent reset calls on same enrollment
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetUserEnrollmentsToPending()[2m > [22mInput Validation[2m > [22mshould throw ValidationError for invalid userId
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetUserEnrollmentsToPending()[2m > [22mError Handling[2m > [22mshould handle getUserEnrollments errors
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetUserEnrollmentsToPending()[2m > [22mError Handling[2m > [22mshould rethrow caught errors
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mresetUserEnrollmentsToPending()[2m > [22mError Handling[2m > [22mshould log errors with context
[31m[1mTypeError[22m: default.validate.validateUserId.mockImplementation is not a function[39m
[90m [2m‚ùØ[22m src/api/enrollment/__tests__/enrollmentServices.reset.test.js:[2m38:48[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[72/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mState Consistency[2m > [22mshould return consistent state after reset
[31m[1m[7m FAIL [27m[22m[39m src/api/enrollment/__tests__/enrollmentServices.reset.test.js[2m > [22menrollmentServices - Reset Functionality[2m > [22mState Consistency[2m > [22mshould not leak sensitive fields
[31m[1mTypeError[22m: default.validate.validateUserId.mockImplementation is not a function[39m
[90m [2m‚ùØ[22m src/api/enrollment/__tests__/enrollmentServices.reset.test.js:[2m38:48[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[73/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/student/__tests__/userServices.getAllStudents.test.js[2m > [22mUser Services - getAllStudents[2m > [22mshould fetch all students with role STUDENT
[31m[1mTypeError[22m: collection.mockReturnValueOnce is not a function[39m
[90m [2m‚ùØ[22m src/api/student/__tests__/userServices.getAllStudents.test.js:[2m36:32[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[74/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/student/__tests__/userServices.getAllStudents.test.js[2m > [22mUser Services - getAllStudents[2m > [22mshould sort students by displayName
[31m[1mTypeError[22m: collection.mockReturnValueOnce is not a function[39m
[90m [2m‚ùØ[22m src/api/student/__tests__/userServices.getAllStudents.test.js:[2m69:32[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[75/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/student/__tests__/userServices.getAllStudents.test.js[2m > [22mUser Services - getAllStudents[2m > [22mshould sort by email when displayName is not available
[31m[1mTypeError[22m: collection.mockReturnValueOnce is not a function[39m
[90m [2m‚ùØ[22m src/api/student/__tests__/userServices.getAllStudents.test.js:[2m100:32[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[76/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/student/__tests__/userServices.getAllStudents.test.js[2m > [22mUser Services - getAllStudents[2m > [22mshould return empty array when no students exist
[31m[1mTypeError[22m: collection.mockReturnValueOnce is not a function[39m
[90m [2m‚ùØ[22m src/api/student/__tests__/userServices.getAllStudents.test.js:[2m115:32[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[77/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/student/__tests__/userServices.getAllStudents.test.js[2m > [22mUser Services - getAllStudents[2m > [22mshould include all student data fields
[31m[1mTypeError[22m: collection.mockReturnValueOnce is not a function[39m
[90m [2m‚ùØ[22m src/api/student/__tests__/userServices.getAllStudents.test.js:[2m141:32[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[78/410]‚éØ[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/api/student/__tests__/userServices.getAllStudents.test.js[2m > [22mUser Services - getAllStudents[2m > [22mshould use query filter for STUDENT role
[31m[1mTypeError[22m: collection.mockReturnValueOnce is not a function[39m
[90m [2m‚ùØ[22m src/api/student/__tests__/userServices.getAllStudents.test.js:[2m160:32[22m[39m

[31m[2m‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ‚éØ[79/410]‚éØ[22m[39m

[2m Test Files [22m [1m[31m31 failed[39m[22m[2m | [22m[1m[32m8 passed[39m[22m[90m (39)[39m
[2m      Tests [22m [1m[31m386 failed[39m[22m[2m | [22m[1m[32m229 passed[39m[22m[90m (615)[39m
[2m   Start at [22m 10:54:35
[2m   Duration [22m 12.17s[2m (transform 996ms, setup 26.06s, collect 6.72s, tests 2.77s, environment 83.02s, prepare 22.91s)[22m

